================================================================================
Risk Manager V34 - Test Report
================================================================================
Test Run: All tests
Timestamp: 2025-10-27 17:06:25
Status: FAILED
Exit Code: 1
================================================================================

Using CPython 3.13.7
Removed virtual environment at: .venv
Creating virtual environment at: .venv
warning: Failed to hardlink files; falling back to full copy. This may lead to degraded performance.
         If the cache and target directories are on different filesystems, hardlinking may not be supported.
         If this is intentional, set `export UV_LINK_MODE=copy` or use `--link-mode=copy` to suppress this warning.
Installed 57 packages in 16.38s
[1m============================= test session starts ==============================[0m
platform linux -- Python 3.13.7, pytest-8.4.2, pluggy-1.6.0 -- /mnt/c/Users/jakers/Desktop/risk-manager-v34/.venv/bin/python
cachedir: .pytest_cache
rootdir: /mnt/c/Users/jakers/Desktop/risk-manager-v34
configfile: pyproject.toml
plugins: anyio-4.11.0, asyncio-1.2.0, cov-7.0.0, mock-3.15.1
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
[1mcollecting ... [0mcollected 189 items

tests/e2e/test_max_contracts_e2e.py::TestMaxContractsE2E::test_position_below_limit_no_enforcement [32mPASSED[0m[33m [  0%][0m
tests/e2e/test_max_contracts_e2e.py::TestMaxContractsE2E::test_position_exceeds_limit_triggers_enforcement [32mPASSED[0m[33m [  1%][0m
tests/e2e/test_max_contracts_e2e.py::TestMaxContractsE2E::test_complete_flow_sdk_to_enforcement [32mPASSED[0m[33m [  1%][0m
tests/e2e/test_max_contracts_e2e.py::TestMaxContractsE2E::test_multiple_position_updates [32mPASSED[0m[33m [  2%][0m
tests/e2e/test_max_contracts_e2e.py::TestMaxContractsE2E::test_multi_symbol_total_exceeds_limit [32mPASSED[0m[33m [  2%][0m
tests/e2e/test_max_contracts_e2e.py::TestMaxContractsE2E::test_enforcement_closes_positions_via_sdk [32mPASSED[0m[33m [  3%][0m
tests/e2e/test_max_contracts_e2e.py::TestMaxContractsE2E::test_system_continues_after_handler_error [32mPASSED[0m[33m [  3%][0m
tests/e2e/test_max_contracts_e2e.py::TestMaxContractsE2E::test_end_to_end_latency [32mPASSED[0m[33m [  4%][0m
tests/e2e/test_max_contracts_e2e.py::TestMaxContractsE2E::test_state_remains_consistent_across_events [32mPASSED[0m[33m [  4%][0m
tests/e2e/test_max_contracts_e2e.py::TestMaxContractsE2E::test_realistic_day_trading_scenario [32mPASSED[0m[33m [  5%][0m
tests/integration/test_event_pipeline_integration.py::TestEventPipelineIntegration::test_event_bus_publishes_to_subscribers [32mPASSED[0m[33m [  5%][0m
tests/integration/test_event_pipeline_integration.py::TestEventPipelineIntegration::test_event_bus_multiple_subscribers [32mPASSED[0m[33m [  6%][0m
tests/integration/test_event_pipeline_integration.py::TestEventPipelineIntegration::test_engine_evaluates_rule_on_event [32mPASSED[0m[33m [  6%][0m
tests/integration/test_event_pipeline_integration.py::TestEventPipelineIntegration::test_engine_skips_rules_when_no_violation [32mPASSED[0m[33m [  7%][0m
tests/integration/test_event_pipeline_integration.py::TestEventPipelineIntegration::test_violation_triggers_flatten_enforcement [32mPASSED[0m[33m [  7%][0m
tests/integration/test_event_pipeline_integration.py::TestEventPipelineIntegration::test_violation_publishes_event [32mPASSED[0m[33m [  8%][0m
tests/integration/test_event_pipeline_integration.py::TestEventPipelineIntegration::test_end_to_end_position_violation_flow [32mPASSED[0m[33m [  8%][0m
tests/integration/test_event_pipeline_integration.py::TestEventPipelineIntegration::test_multiple_rules_evaluated_in_order [32mPASSED[0m[33m [  9%][0m
tests/integration/test_event_pipeline_integration.py::TestEventPipelineIntegration::test_event_bus_handles_handler_errors [32mPASSED[0m[33m [ 10%][0m
tests/integration/test_event_pipeline_integration.py::TestEventPipelineIntegration::test_engine_tracks_position_state [32mPASSED[0m[33m [ 10%][0m
tests/integration/test_event_pipeline_integration.py::TestEventPipelineIntegration::test_flatten_action_calls_flatten_all [32mPASSED[0m[33m [ 11%][0m
tests/integration/test_event_pipeline_integration.py::TestEventPipelineIntegration::test_pause_action_triggers_pause_trading [32mPASSED[0m[33m [ 11%][0m
tests/integration/test_event_pipeline_integration.py::TestEventPipelineIntegration::test_event_processing_is_fast [32mPASSED[0m[33m [ 12%][0m
tests/integration/test_event_pipeline_integration.py::TestEventPipelineIntegration::test_multi_symbol_position_tracking [32mPASSED[0m[33m [ 12%][0m
tests/runtime/test_async_debug.py::test_async_task_creation [32mPASSED[0m[33m       [ 13%][0m
tests/runtime/test_async_debug.py::test_async_task_lifecycle [32mPASSED[0m[33m      [ 13%][0m
tests/runtime/test_async_debug.py::test_async_task_cancellation [32mPASSED[0m[33m   [ 14%][0m
tests/runtime/test_async_debug.py::test_async_race_condition_detection [32mPASSED[0m[33m [ 14%][0m
tests/runtime/test_async_debug.py::test_async_deadlock_prevention [32mPASSED[0m[33m [ 15%][0m
tests/runtime/test_async_debug.py::test_async_resource_leak_detection [32mPASSED[0m[33m [ 15%][0m
tests/runtime/test_async_debug.py::test_async_task_duration_tracking [32mPASSED[0m[33m [ 16%][0m
tests/runtime/test_async_debug.py::test_async_slow_task_detection [32mPASSED[0m[33m [ 16%][0m
tests/runtime/test_async_debug.py::test_async_memory_usage [32mPASSED[0m[33m        [ 17%][0m
tests/runtime/test_async_debug.py::test_async_exception_tracking [32mPASSED[0m[33m  [ 17%][0m
tests/runtime/test_async_debug.py::test_async_timeout_detection [32mPASSED[0m[33m   [ 18%][0m
tests/runtime/test_async_debug.py::test_async_task_inspection [32mPASSED[0m[33m     [ 19%][0m
tests/runtime/test_async_debug.py::test_async_event_loop_monitoring [32mPASSED[0m[33m [ 19%][0m
tests/runtime/test_async_debug.py::test_async_debug_logging [32mPASSED[0m[33m       [ 20%][0m
tests/runtime/test_dry_run.py::test_dry_run_enabled [32mPASSED[0m[33m               [ 20%][0m
tests/runtime/test_dry_run.py::test_dry_run_no_real_trades [32mPASSED[0m[33m        [ 21%][0m
tests/runtime/test_dry_run.py::test_dry_run_simulates_positions [32mPASSED[0m[33m   [ 21%][0m
tests/runtime/test_dry_run.py::test_dry_run_logs_actions [32mPASSED[0m[33m          [ 22%][0m
tests/runtime/test_dry_run.py::test_dry_run_validates_operations [32mPASSED[0m[33m  [ 22%][0m
tests/runtime/test_dry_run.py::test_dry_run_tracks_simulated_state [32mPASSED[0m[33m [ 23%][0m
tests/runtime/test_dry_run.py::test_dry_run_pnl_calculation [31mFAILED[0m[31m       [ 23%][0m
tests/runtime/test_dry_run.py::test_dry_run_state_isolation [32mPASSED[0m[31m       [ 24%][0m
tests/runtime/test_dry_run.py::test_dry_run_vs_real_comparison [31mFAILED[0m[31m    [ 24%][0m
tests/runtime/test_dry_run.py::test_dry_run_same_logic [32mPASSED[0m[31m            [ 25%][0m
tests/runtime/test_dry_run.py::test_dry_run_detects_errors [32mPASSED[0m[31m        [ 25%][0m
tests/runtime/test_dry_run.py::test_dry_run_error_handling [32mPASSED[0m[31m        [ 26%][0m
tests/runtime/test_dry_run.py::test_dry_run_generates_report [32mPASSED[0m[31m      [ 26%][0m
tests/runtime/test_dry_run.py::test_dry_run_summary_statistics [32mPASSED[0m[31m    [ 27%][0m
tests/runtime/test_heartbeat.py::test_heartbeat_initial_alive [32mPASSED[0m[31m     [ 28%][0m
tests/runtime/test_heartbeat.py::test_heartbeat_regular_updates [32mPASSED[0m[31m   [ 28%][0m
tests/runtime/test_heartbeat.py::test_heartbeat_timestamp_recent [32mPASSED[0m[31m  [ 29%][0m
tests/runtime/test_heartbeat.py::test_heartbeat_health_status_healthy [32mPASSED[0m[31m [ 29%][0m
tests/runtime/test_heartbeat.py::test_heartbeat_continuous_monitoring [32mPASSED[0m[31m [ 30%][0m
tests/runtime/test_heartbeat.py::test_heartbeat_timeout_failure [32mPASSED[0m[31m   [ 30%][0m
tests/runtime/test_heartbeat.py::test_heartbeat_monitor_stopped [32mPASSED[0m[31m   [ 31%][0m
tests/runtime/test_heartbeat.py::test_heartbeat_degraded_health [32mPASSED[0m[31m   [ 31%][0m
tests/runtime/test_heartbeat.py::test_heartbeat_unhealthy_status [32mPASSED[0m[31m  [ 32%][0m
tests/runtime/test_heartbeat.py::test_heartbeat_uptime_tracking [32mPASSED[0m[31m   [ 32%][0m
tests/runtime/test_heartbeat.py::test_heartbeat_uptime_reset_on_restart [32mPASSED[0m[31m [ 33%][0m
tests/runtime/test_heartbeat.py::test_heartbeat_recovery_after_pause [32mPASSED[0m[31m [ 33%][0m
tests/runtime/test_heartbeat.py::test_heartbeat_automatic_restart [32mPASSED[0m[31m [ 34%][0m
tests/runtime/test_heartbeat.py::test_heartbeat_metrics_collection [32mPASSED[0m[31m [ 34%][0m
tests/runtime/test_heartbeat.py::test_heartbeat_interval_consistency [32mPASSED[0m[31m [ 35%][0m
tests/runtime/test_post_conditions.py::test_post_condition_state_valid_after_trade [32mPASSED[0m[31m [ 35%][0m
tests/runtime/test_post_conditions.py::test_post_condition_positions_consistent [32mPASSED[0m[31m [ 36%][0m
tests/runtime/test_post_conditions.py::test_post_condition_rules_enforced [32mPASSED[0m[31m [ 37%][0m
tests/runtime/test_post_conditions.py::test_post_condition_event_bus_operational [31mFAILED[0m[31m [ 37%][0m
tests/runtime/test_post_conditions.py::test_post_condition_memory_bounds [32mPASSED[0m[31m [ 38%][0m
tests/runtime/test_post_conditions.py::test_post_condition_invalid_state [32mPASSED[0m[31m [ 38%][0m
tests/runtime/test_post_conditions.py::test_post_condition_data_inconsistency [32mPASSED[0m[31m [ 39%][0m
tests/runtime/test_post_conditions.py::test_post_condition_constraint_violated [32mPASSED[0m[31m [ 39%][0m
tests/runtime/test_post_conditions.py::test_post_condition_timeout [32mPASSED[0m[31m [ 40%][0m
tests/runtime/test_post_conditions.py::test_post_condition_multiple_checks [32mPASSED[0m[31m [ 40%][0m
tests/runtime/test_post_conditions.py::test_post_condition_partial_failure [32mPASSED[0m[31m [ 41%][0m
tests/runtime/test_post_conditions.py::test_post_condition_invariant_maintained [32mPASSED[0m[31m [ 41%][0m
tests/runtime/test_post_conditions.py::test_post_condition_referential_integrity [32mPASSED[0m[31m [ 42%][0m
tests/runtime/test_post_conditions.py::test_post_condition_audit_trail [32mPASSED[0m[31m [ 42%][0m
tests/runtime/test_smoke.py::test_smoke_basic_startup_success [32mPASSED[0m[31m     [ 43%][0m
tests/runtime/test_smoke.py::test_smoke_configuration_load_success [32mPASSED[0m[31m [ 43%][0m
tests/runtime/test_smoke.py::test_smoke_event_bus_success [31mFAILED[0m[31m         [ 44%][0m
tests/runtime/test_smoke.py::test_smoke_rule_engine_success [32mPASSED[0m[31m       [ 44%][0m
tests/runtime/test_smoke.py::test_smoke_state_tracking_success [31mFAILED[0m[31m    [ 45%][0m
tests/runtime/test_smoke.py::test_smoke_missing_config_failure [32mPASSED[0m[31m    [ 46%][0m
tests/runtime/test_smoke.py::test_smoke_invalid_config_failure [32mPASSED[0m[31m    [ 46%][0m
tests/runtime/test_smoke.py::test_smoke_startup_timeout_failure [32mPASSED[0m[31m   [ 47%][0m
tests/runtime/test_smoke.py::test_smoke_dependency_failure [32mPASSED[0m[31m        [ 47%][0m
tests/runtime/test_smoke.py::test_smoke_full_suite_success [32mPASSED[0m[31m        [ 48%][0m
tests/runtime/test_smoke.py::test_smoke_partial_failure [32mPASSED[0m[31m           [ 48%][0m
tests/runtime/test_smoke.py::test_smoke_log_output_verification [32mPASSED[0m[31m   [ 49%][0m
tests/runtime/test_smoke.py::test_smoke_error_log_output [32mPASSED[0m[31m          [ 49%][0m
tests/unit/test_core/test_enforcement_wiring.py::TestEnforcementWiring::test_engine_accepts_trading_integration [32mPASSED[0m[31m [ 50%][0m
tests/unit/test_core/test_enforcement_wiring.py::TestEnforcementWiring::test_flatten_all_calls_trading_integration [32mPASSED[0m[31m [ 50%][0m
tests/unit/test_core/test_enforcement_wiring.py::TestEnforcementWiring::test_flatten_all_without_trading_integration [32mPASSED[0m[31m [ 51%][0m
tests/unit/test_core/test_enforcement_wiring.py::TestEnforcementWiring::test_enforcement_from_violation [32mPASSED[0m[31m [ 51%][0m
tests/unit/test_core/test_events.py::TestEventBus::test_create_event_bus [32mPASSED[0m[31m [ 52%][0m
tests/unit/test_core/test_events.py::TestEventBus::test_subscribe_to_event [32mPASSED[0m[31m [ 52%][0m
tests/unit/test_core/test_events.py::TestEventBus::test_subscribe_multiple_callbacks [32mPASSED[0m[31m [ 53%][0m
tests/unit/test_core/test_events.py::TestEventBus::test_unsubscribe_from_event [32mPASSED[0m[31m [ 53%][0m
tests/unit/test_core/test_events.py::TestRiskEvent::test_create_event [32mPASSED[0m[31m [ 54%][0m
tests/unit/test_core/test_events.py::TestRiskEvent::test_event_has_timestamp [32mPASSED[0m[31m [ 55%][0m
tests/unit/test_core/test_events.py::TestEventType::test_event_types_exist [32mPASSED[0m[31m [ 55%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_rule_initialization [32mPASSED[0m[31m [ 56%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_rule_initialization_custom_action [32mPASSED[0m[31m [ 56%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_position_below_limit_passes [32mPASSED[0m[31m [ 57%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_zero_position_passes [32mPASSED[0m[31m [ 57%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_position_at_limit_passes [32mPASSED[0m[31m [ 58%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_position_exceeds_limit_violates [32mPASSED[0m[31m [ 58%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_large_position_violates [32mPASSED[0m[31m [ 59%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_multi_symbol_total_below_limit [32mPASSED[0m[31m [ 59%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_multi_symbol_total_exceeds_limit [32mPASSED[0m[31m [ 60%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_short_position_below_limit [32mPASSED[0m[31m [ 60%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_short_position_exceeds_limit [32mPASSED[0m[31m [ 61%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_flatten_action_in_violation [32mPASSED[0m[31m [ 61%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_reject_action_in_violation [32mPASSED[0m[31m [ 62%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_only_evaluates_position_events [32mPASSED[0m[31m [ 62%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_evaluates_order_filled_event [32mPASSED[0m[31m [ 63%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_negative_limit_raises_error [32mPASSED[0m[31m [ 64%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_zero_limit [32mPASSED[0m[31m [ 64%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_missing_position_data [32mPASSED[0m[31m [ 65%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_violation_message_clarity [32mPASSED[0m[31m [ 65%][0m
tests/unit/test_state/test_lockout_manager.py::TestHardLockoutOperations::test_set_lockout_locks_account [31mFAILED[0m[31m [ 66%][0m
tests/unit/test_state/test_lockout_manager.py::TestHardLockoutOperations::test_is_locked_out_returns_true_when_locked [31mFAILED[0m[31m [ 66%][0m
tests/unit/test_state/test_lockout_manager.py::TestHardLockoutOperations::test_is_locked_out_returns_false_when_not_locked [32mPASSED[0m[31m [ 67%][0m
tests/unit/test_state/test_lockout_manager.py::TestHardLockoutOperations::test_get_lockout_info_returns_details [31mFAILED[0m[31m [ 67%][0m
tests/unit/test_state/test_lockout_manager.py::TestHardLockoutOperations::test_get_lockout_info_returns_none_when_not_locked [32mPASSED[0m[31m [ 68%][0m
tests/unit/test_state/test_lockout_manager.py::TestHardLockoutOperations::test_clear_lockout_removes_lockout [31mFAILED[0m[31m [ 68%][0m
tests/unit/test_state/test_lockout_manager.py::TestCooldownTimers::test_set_cooldown_creates_timer [32mPASSED[0m[31m [ 69%][0m
tests/unit/test_state/test_lockout_manager.py::TestCooldownTimers::test_cooldown_auto_expires_after_duration [31mFAILED[0m[31m [ 69%][0m
tests/unit/test_state/test_lockout_manager.py::TestCooldownTimers::test_cooldown_remaining_time_decreases [32mPASSED[0m[31m [ 70%][0m
tests/unit/test_state/test_lockout_manager.py::TestCooldownTimers::test_cooldown_cleared_cancels_timer [31mFAILED[0m[31m [ 70%][0m
tests/unit/test_state/test_lockout_manager.py::TestCooldownTimers::test_cooldown_integrates_with_timer_manager [32mPASSED[0m[31m [ 71%][0m
tests/unit/test_state/test_lockout_manager.py::TestBackgroundTask::test_check_expired_lockouts_runs_every_second [32mPASSED[0m[31m [ 71%][0m
tests/unit/test_state/test_lockout_manager.py::TestBackgroundTask::test_expired_lockout_auto_cleared [31mFAILED[0m[31m [ 72%][0m
tests/unit/test_state/test_lockout_manager.py::TestBackgroundTask::test_background_task_stops_on_shutdown [32mPASSED[0m[31m [ 73%][0m
tests/unit/test_state/test_lockout_manager.py::TestMultipleAccounts::test_multiple_accounts_locked_independently [31mFAILED[0m[31m [ 73%][0m
tests/unit/test_state/test_lockout_manager.py::TestMultipleAccounts::test_lockout_affects_only_target_account [31mFAILED[0m[31m [ 74%][0m
tests/unit/test_state/test_lockout_manager.py::TestMultipleAccounts::test_clear_lockout_affects_only_target_account [31mFAILED[0m[31m [ 74%][0m
tests/unit/test_state/test_lockout_manager.py::TestDatabasePersistence::test_lockout_saved_to_database [32mPASSED[0m[31m [ 75%][0m
tests/unit/test_state/test_lockout_manager.py::TestDatabasePersistence::test_lockout_deleted_from_database_on_clear [32mPASSED[0m[31m [ 75%][0m
tests/unit/test_state/test_lockout_manager.py::TestDatabasePersistence::test_load_lockouts_populates_memory_state [31mFAILED[0m[31m [ 76%][0m
tests/unit/test_state/test_lockout_manager.py::TestDatabasePersistence::test_expired_lockout_removed_from_database [32mPASSED[0m[31m [ 76%][0m
tests/unit/test_state/test_lockout_manager.py::TestDatabasePersistence::test_database_schema_correct [32mPASSED[0m[31m [ 77%][0m
tests/unit/test_state/test_lockout_manager.py::TestEdgeCases::test_lockout_until_past_time_immediately_expired [32mPASSED[0m[31m [ 77%][0m
tests/unit/test_state/test_lockout_manager.py::TestEdgeCases::test_lockout_reason_persisted_correctly [31mFAILED[0m[31m [ 78%][0m
tests/unit/test_state/test_lockout_manager.py::TestEdgeCases::test_double_lockout_overwrites_previous [31mFAILED[0m[31m [ 78%][0m
tests/unit/test_state/test_lockout_manager.py::TestEventRouterIntegration::test_locked_account_blocks_rule_processing [31mFAILED[0m[31m [ 79%][0m
tests/unit/test_state/test_lockout_manager.py::TestEventRouterIntegration::test_unlocked_account_allows_rule_processing [32mPASSED[0m[31m [ 79%][0m
tests/unit/test_state/test_lockout_manager.py::TestLockoutTypes::test_hard_lockout_type_stored_correctly [31mFAILED[0m[31m [ 80%][0m
tests/unit/test_state/test_lockout_manager.py::TestLockoutTypes::test_cooldown_type_stored_correctly [32mPASSED[0m[31m [ 80%][0m
tests/unit/test_state/test_lockout_manager.py::TestStartupShutdown::test_lockouts_restored_on_startup [31mFAILED[0m[31m [ 81%][0m
tests/unit/test_state/test_lockout_manager.py::TestStartupShutdown::test_shutdown_cancels_all_timers [32mPASSED[0m[31m [ 82%][0m
tests/unit/test_state/test_pnl_tracker.py::TestPnLTrackerBasics::test_tracker_initializes [32mPASSED[0m[31m [ 82%][0m
tests/unit/test_state/test_pnl_tracker.py::TestPnLTrackerBasics::test_get_daily_pnl_returns_zero_for_new_account [32mPASSED[0m[31m [ 83%][0m
tests/unit/test_state/test_pnl_tracker.py::TestPnLTrackerBasics::test_add_trade_pnl_updates_daily_total [32mPASSED[0m[31m [ 83%][0m
tests/unit/test_state/test_pnl_tracker.py::TestPnLTrackerPersistence::test_pnl_survives_restart [32mPASSED[0m[31m [ 84%][0m
tests/unit/test_state/test_pnl_tracker.py::TestPnLTrackerPersistence::test_multiple_accounts_tracked_independently [32mPASSED[0m[31m [ 84%][0m
tests/unit/test_state/test_pnl_tracker.py::TestPnLTrackerReset::test_reset_clears_daily_pnl [32mPASSED[0m[31m [ 85%][0m
tests/unit/test_state/test_pnl_tracker.py::TestPnLTrackerReset::test_different_dates_tracked_separately [32mPASSED[0m[31m [ 85%][0m
tests/unit/test_state/test_pnl_tracker.py::TestPnLTrackerTradeCount::test_trade_count_increments [32mPASSED[0m[31m [ 86%][0m
tests/unit/test_state/test_pnl_tracker.py::TestPnLTrackerTradeCount::test_trade_count_resets_with_pnl [32mPASSED[0m[31m [ 86%][0m
tests/unit/test_state/test_pnl_tracker.py::TestPnLTrackerEdgeCases::test_handles_zero_pnl_trades [32mPASSED[0m[31m [ 87%][0m
tests/unit/test_state/test_pnl_tracker.py::TestPnLTrackerEdgeCases::test_handles_large_pnl_values [32mPASSED[0m[31m [ 87%][0m
tests/unit/test_state/test_pnl_tracker.py::TestPnLTrackerEdgeCases::test_get_all_account_pnls [32mPASSED[0m[31m [ 88%][0m
tests/unit/test_state/test_timer_manager.py::test_start_timer_creates_timer [31mERROR[0m[31m [ 88%][0m
tests/unit/test_state/test_timer_manager.py::test_get_remaining_time_decreases [31mERROR[0m[31m [ 89%][0m
tests/unit/test_state/test_timer_manager.py::test_cancel_timer_removes_timer [31mERROR[0m[31m [ 89%][0m
tests/unit/test_state/test_timer_manager.py::test_expired_timer_executes_callback [31mERROR[0m[31m [ 90%][0m
tests/unit/test_state/test_timer_manager.py::test_expired_timer_auto_removed [31mERROR[0m[31m [ 91%][0m
tests/unit/test_state/test_timer_manager.py::test_multiple_timers_run_simultaneously [31mERROR[0m[31m [ 91%][0m
tests/unit/test_state/test_timer_manager.py::test_timers_expire_independently [31mERROR[0m[31m [ 92%][0m
tests/unit/test_state/test_timer_manager.py::test_cancel_specific_timer_preserves_others [31mERROR[0m[31m [ 92%][0m
tests/unit/test_state/test_timer_manager.py::test_callback_receives_correct_context [31mERROR[0m[31m [ 93%][0m
tests/unit/test_state/test_timer_manager.py::test_callback_exception_doesnt_crash_manager [31mERROR[0m[31m [ 93%][0m
tests/unit/test_state/test_timer_manager.py::test_callback_executes_exactly_once [31mERROR[0m[31m [ 94%][0m
tests/unit/test_state/test_timer_manager.py::test_async_callback_supported [31mERROR[0m[31m [ 94%][0m
tests/unit/test_state/test_timer_manager.py::test_zero_duration_timer_executes_immediately [31mERROR[0m[31m [ 95%][0m
tests/unit/test_state/test_timer_manager.py::test_negative_duration_raises_error [31mERROR[0m[31m [ 95%][0m
tests/unit/test_state/test_timer_manager.py::test_timer_precision_within_tolerance [31mERROR[0m[31m [ 96%][0m
tests/unit/test_state/test_timer_manager.py::test_check_timers_runs_every_second [31mERROR[0m[31m [ 96%][0m
tests/unit/test_state/test_timer_manager.py::test_check_timers_stops_on_shutdown [31mERROR[0m[31m [ 97%][0m
tests/unit/test_state/test_timer_manager.py::test_get_remaining_time_nonexistent_timer_returns_zero [31mERROR[0m[31m [ 97%][0m
tests/unit/test_state/test_timer_manager.py::test_cancel_nonexistent_timer_no_error [31mERROR[0m[31m [ 98%][0m
tests/unit/test_state/test_timer_manager.py::test_duplicate_timer_name_overwrites_previous [31mERROR[0m[31m [ 98%][0m
tests/unit/test_state/test_timer_manager.py::test_has_timer_returns_false_for_nonexistent [31mERROR[0m[31m [ 99%][0m
tests/unit/test_state/test_timer_manager.py::test_start_timer_without_callback_raises_error [31mERROR[0m[31m [100%][0m

==================================== ERRORS ====================================
[31m[1m_______________ ERROR at setup of test_start_timer_creates_timer _______________[0m
[1m[31mtests/unit/test_state/test_timer_manager.py[0m:31: in timer_manager
    [0m[94mfrom[39;49;00m[90m [39;49;00m[04m[96mrisk_manager[39;49;00m[04m[96m.[39;49;00m[04m[96mstate[39;49;00m[04m[96m.[39;49;00m[04m[96mtimer_manager[39;49;00m[90m [39;49;00m[94mimport[39;49;00m TimerManager[90m[39;49;00m
[1m[31mE   ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'[0m
[31m[1m_____________ ERROR at setup of test_get_remaining_time_decreases ______________[0m
[1m[31mtests/unit/test_state/test_timer_manager.py[0m:31: in timer_manager
    [0m[94mfrom[39;49;00m[90m [39;49;00m[04m[96mrisk_manager[39;49;00m[04m[96m.[39;49;00m[04m[96mstate[39;49;00m[04m[96m.[39;49;00m[04m[96mtimer_manager[39;49;00m[90m [39;49;00m[94mimport[39;49;00m TimerManager[90m[39;49;00m
[1m[31mE   ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'[0m
[31m[1m______________ ERROR at setup of test_cancel_timer_removes_timer _______________[0m
[1m[31mtests/unit/test_state/test_timer_manager.py[0m:31: in timer_manager
    [0m[94mfrom[39;49;00m[90m [39;49;00m[04m[96mrisk_manager[39;49;00m[04m[96m.[39;49;00m[04m[96mstate[39;49;00m[04m[96m.[39;49;00m[04m[96mtimer_manager[39;49;00m[90m [39;49;00m[94mimport[39;49;00m TimerManager[90m[39;49;00m
[1m[31mE   ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'[0m
[31m[1m____________ ERROR at setup of test_expired_timer_executes_callback ____________[0m
[1m[31mtests/unit/test_state/test_timer_manager.py[0m:31: in timer_manager
    [0m[94mfrom[39;49;00m[90m [39;49;00m[04m[96mrisk_manager[39;49;00m[04m[96m.[39;49;00m[04m[96mstate[39;49;00m[04m[96m.[39;49;00m[04m[96mtimer_manager[39;49;00m[90m [39;49;00m[94mimport[39;49;00m TimerManager[90m[39;49;00m
[1m[31mE   ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'[0m
[31m[1m______________ ERROR at setup of test_expired_timer_auto_removed _______________[0m
[1m[31mtests/unit/test_state/test_timer_manager.py[0m:31: in timer_manager
    [0m[94mfrom[39;49;00m[90m [39;49;00m[04m[96mrisk_manager[39;49;00m[04m[96m.[39;49;00m[04m[96mstate[39;49;00m[04m[96m.[39;49;00m[04m[96mtimer_manager[39;49;00m[90m [39;49;00m[94mimport[39;49;00m TimerManager[90m[39;49;00m
[1m[31mE   ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'[0m
[31m[1m__________ ERROR at setup of test_multiple_timers_run_simultaneously ___________[0m
[1m[31mtests/unit/test_state/test_timer_manager.py[0m:31: in timer_manager
    [0m[94mfrom[39;49;00m[90m [39;49;00m[04m[96mrisk_manager[39;49;00m[04m[96m.[39;49;00m[04m[96mstate[39;49;00m[04m[96m.[39;49;00m[04m[96mtimer_manager[39;49;00m[90m [39;49;00m[94mimport[39;49;00m TimerManager[90m[39;49;00m
[1m[31mE   ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'[0m
[31m[1m______________ ERROR at setup of test_timers_expire_independently ______________[0m
[1m[31mtests/unit/test_state/test_timer_manager.py[0m:31: in timer_manager
    [0m[94mfrom[39;49;00m[90m [39;49;00m[04m[96mrisk_manager[39;49;00m[04m[96m.[39;49;00m[04m[96mstate[39;49;00m[04m[96m.[39;49;00m[04m[96mtimer_manager[39;49;00m[90m [39;49;00m[94mimport[39;49;00m TimerManager[90m[39;49;00m
[1m[31mE   ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'[0m
[31m[1m________ ERROR at setup of test_cancel_specific_timer_preserves_others _________[0m
[1m[31mtests/unit/test_state/test_timer_manager.py[0m:31: in timer_manager
    [0m[94mfrom[39;49;00m[90m [39;49;00m[04m[96mrisk_manager[39;49;00m[04m[96m.[39;49;00m[04m[96mstate[39;49;00m[04m[96m.[39;49;00m[04m[96mtimer_manager[39;49;00m[90m [39;49;00m[94mimport[39;49;00m TimerManager[90m[39;49;00m
[1m[31mE   ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'[0m
[31m[1m___________ ERROR at setup of test_callback_receives_correct_context ___________[0m
[1m[31mtests/unit/test_state/test_timer_manager.py[0m:31: in timer_manager
    [0m[94mfrom[39;49;00m[90m [39;49;00m[04m[96mrisk_manager[39;49;00m[04m[96m.[39;49;00m[04m[96mstate[39;49;00m[04m[96m.[39;49;00m[04m[96mtimer_manager[39;49;00m[90m [39;49;00m[94mimport[39;49;00m TimerManager[90m[39;49;00m
[1m[31mE   ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'[0m
[31m[1m________ ERROR at setup of test_callback_exception_doesnt_crash_manager ________[0m
[1m[31mtests/unit/test_state/test_timer_manager.py[0m:31: in timer_manager
    [0m[94mfrom[39;49;00m[90m [39;49;00m[04m[96mrisk_manager[39;49;00m[04m[96m.[39;49;00m[04m[96mstate[39;49;00m[04m[96m.[39;49;00m[04m[96mtimer_manager[39;49;00m[90m [39;49;00m[94mimport[39;49;00m TimerManager[90m[39;49;00m
[1m[31mE   ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'[0m
[31m[1m____________ ERROR at setup of test_callback_executes_exactly_once _____________[0m
[1m[31mtests/unit/test_state/test_timer_manager.py[0m:31: in timer_manager
    [0m[94mfrom[39;49;00m[90m [39;49;00m[04m[96mrisk_manager[39;49;00m[04m[96m.[39;49;00m[04m[96mstate[39;49;00m[04m[96m.[39;49;00m[04m[96mtimer_manager[39;49;00m[90m [39;49;00m[94mimport[39;49;00m TimerManager[90m[39;49;00m
[1m[31mE   ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'[0m
[31m[1m_______________ ERROR at setup of test_async_callback_supported ________________[0m
[1m[31mtests/unit/test_state/test_timer_manager.py[0m:31: in timer_manager
    [0m[94mfrom[39;49;00m[90m [39;49;00m[04m[96mrisk_manager[39;49;00m[04m[96m.[39;49;00m[04m[96mstate[39;49;00m[04m[96m.[39;49;00m[04m[96mtimer_manager[39;49;00m[90m [39;49;00m[94mimport[39;49;00m TimerManager[90m[39;49;00m
[1m[31mE   ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'[0m
[31m[1m_______ ERROR at setup of test_zero_duration_timer_executes_immediately ________[0m
[1m[31mtests/unit/test_state/test_timer_manager.py[0m:31: in timer_manager
    [0m[94mfrom[39;49;00m[90m [39;49;00m[04m[96mrisk_manager[39;49;00m[04m[96m.[39;49;00m[04m[96mstate[39;49;00m[04m[96m.[39;49;00m[04m[96mtimer_manager[39;49;00m[90m [39;49;00m[94mimport[39;49;00m TimerManager[90m[39;49;00m
[1m[31mE   ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'[0m
[31m[1m____________ ERROR at setup of test_negative_duration_raises_error _____________[0m
[1m[31mtests/unit/test_state/test_timer_manager.py[0m:31: in timer_manager
    [0m[94mfrom[39;49;00m[90m [39;49;00m[04m[96mrisk_manager[39;49;00m[04m[96m.[39;49;00m[04m[96mstate[39;49;00m[04m[96m.[39;49;00m[04m[96mtimer_manager[39;49;00m[90m [39;49;00m[94mimport[39;49;00m TimerManager[90m[39;49;00m
[1m[31mE   ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'[0m
[31m[1m___________ ERROR at setup of test_timer_precision_within_tolerance ____________[0m
[1m[31mtests/unit/test_state/test_timer_manager.py[0m:31: in timer_manager
    [0m[94mfrom[39;49;00m[90m [39;49;00m[04m[96mrisk_manager[39;49;00m[04m[96m.[39;49;00m[04m[96mstate[39;49;00m[04m[96m.[39;49;00m[04m[96mtimer_manager[39;49;00m[90m [39;49;00m[94mimport[39;49;00m TimerManager[90m[39;49;00m
[1m[31mE   ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'[0m
[31m[1m____________ ERROR at setup of test_check_timers_runs_every_second _____________[0m
[1m[31mtests/unit/test_state/test_timer_manager.py[0m:31: in timer_manager
    [0m[94mfrom[39;49;00m[90m [39;49;00m[04m[96mrisk_manager[39;49;00m[04m[96m.[39;49;00m[04m[96mstate[39;49;00m[04m[96m.[39;49;00m[04m[96mtimer_manager[39;49;00m[90m [39;49;00m[94mimport[39;49;00m TimerManager[90m[39;49;00m
[1m[31mE   ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'[0m
[31m[1m____________ ERROR at setup of test_check_timers_stops_on_shutdown _____________[0m
[1m[31mtests/unit/test_state/test_timer_manager.py[0m:31: in timer_manager
    [0m[94mfrom[39;49;00m[90m [39;49;00m[04m[96mrisk_manager[39;49;00m[04m[96m.[39;49;00m[04m[96mstate[39;49;00m[04m[96m.[39;49;00m[04m[96mtimer_manager[39;49;00m[90m [39;49;00m[94mimport[39;49;00m TimerManager[90m[39;49;00m
[1m[31mE   ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'[0m
[31m[1m___ ERROR at setup of test_get_remaining_time_nonexistent_timer_returns_zero ___[0m
[1m[31mtests/unit/test_state/test_timer_manager.py[0m:31: in timer_manager
    [0m[94mfrom[39;49;00m[90m [39;49;00m[04m[96mrisk_manager[39;49;00m[04m[96m.[39;49;00m[04m[96mstate[39;49;00m[04m[96m.[39;49;00m[04m[96mtimer_manager[39;49;00m[90m [39;49;00m[94mimport[39;49;00m TimerManager[90m[39;49;00m
[1m[31mE   ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'[0m
[31m[1m___________ ERROR at setup of test_cancel_nonexistent_timer_no_error ___________[0m
[1m[31mtests/unit/test_state/test_timer_manager.py[0m:31: in timer_manager
    [0m[94mfrom[39;49;00m[90m [39;49;00m[04m[96mrisk_manager[39;49;00m[04m[96m.[39;49;00m[04m[96mstate[39;49;00m[04m[96m.[39;49;00m[04m[96mtimer_manager[39;49;00m[90m [39;49;00m[94mimport[39;49;00m TimerManager[90m[39;49;00m
[1m[31mE   ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'[0m
[31m[1m_______ ERROR at setup of test_duplicate_timer_name_overwrites_previous ________[0m
[1m[31mtests/unit/test_state/test_timer_manager.py[0m:31: in timer_manager
    [0m[94mfrom[39;49;00m[90m [39;49;00m[04m[96mrisk_manager[39;49;00m[04m[96m.[39;49;00m[04m[96mstate[39;49;00m[04m[96m.[39;49;00m[04m[96mtimer_manager[39;49;00m[90m [39;49;00m[94mimport[39;49;00m TimerManager[90m[39;49;00m
[1m[31mE   ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'[0m
[31m[1m________ ERROR at setup of test_has_timer_returns_false_for_nonexistent ________[0m
[1m[31mtests/unit/test_state/test_timer_manager.py[0m:31: in timer_manager
    [0m[94mfrom[39;49;00m[90m [39;49;00m[04m[96mrisk_manager[39;49;00m[04m[96m.[39;49;00m[04m[96mstate[39;49;00m[04m[96m.[39;49;00m[04m[96mtimer_manager[39;49;00m[90m [39;49;00m[94mimport[39;49;00m TimerManager[90m[39;49;00m
[1m[31mE   ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'[0m
[31m[1m_______ ERROR at setup of test_start_timer_without_callback_raises_error _______[0m
[1m[31mtests/unit/test_state/test_timer_manager.py[0m:31: in timer_manager
    [0m[94mfrom[39;49;00m[90m [39;49;00m[04m[96mrisk_manager[39;49;00m[04m[96m.[39;49;00m[04m[96mstate[39;49;00m[04m[96m.[39;49;00m[04m[96mtimer_manager[39;49;00m[90m [39;49;00m[94mimport[39;49;00m TimerManager[90m[39;49;00m
[1m[31mE   ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'[0m
=================================== FAILURES ===================================
[31m[1m_________________________ test_dry_run_pnl_calculation _________________________[0m
[1m[31mtests/runtime/test_dry_run.py[0m:175: in test_dry_run_pnl_calculation
    [0mdb = Database()[90m[39;49;00m
         ^^^^^^^^^^[90m[39;49;00m
[1m[31mE   TypeError: Database.__init__() missing 1 required positional argument: 'db_path'[0m
[31m[1m_______________________ test_dry_run_vs_real_comparison ________________________[0m
[1m[31mtests/runtime/test_dry_run.py[0m:242: in test_dry_run_vs_real_comparison
    [0m[94massert[39;49;00m result[[33m'[39;49;00m[33mpassed[39;49;00m[33m'[39;49;00m] [95mis[39;49;00m [94mTrue[39;49;00m[90m[39;49;00m
[1m[31mE   assert False is True[0m
[31m[1m__________________ test_post_condition_event_bus_operational ___________________[0m
[1m[31mtests/runtime/test_post_conditions.py[0m:133: in test_post_condition_event_bus_operational
    [0m[94massert[39;49;00m result[[33m'[39;49;00m[33mpassed[39;49;00m[33m'[39;49;00m] [95mis[39;49;00m [94mTrue[39;49;00m[90m[39;49;00m
[1m[31mE   assert False is True[0m
[31m[1m_________________________ test_smoke_event_bus_success _________________________[0m
[1m[31mtests/runtime/test_smoke.py[0m:94: in test_smoke_event_bus_success
    [0m[94massert[39;49;00m result[[33m'[39;49;00m[33mpassed[39;49;00m[33m'[39;49;00m] [95mis[39;49;00m [94mTrue[39;49;00m[90m[39;49;00m
[1m[31mE   assert False is True[0m
[31m[1m______________________ test_smoke_state_tracking_success _______________________[0m
[1m[31mtests/runtime/test_smoke.py[0m:127: in test_smoke_state_tracking_success
    [0mdb = Database()[90m[39;49;00m
         ^^^^^^^^^^[90m[39;49;00m
[1m[31mE   TypeError: Database.__init__() missing 1 required positional argument: 'db_path'[0m
[31m[1m___________ TestHardLockoutOperations.test_set_lockout_locks_account ___________[0m
[1m[31mtests/unit/test_state/test_lockout_manager.py[0m:82: in test_set_lockout_locks_account
    [0m[94massert[39;49;00m lockout_manager.is_locked_out(account_id) [95mis[39;49;00m [94mTrue[39;49;00m[90m[39;49;00m
[1m[31mE   assert False is True[0m
[1m[31mE    +  where False = is_locked_out(123)[0m
[1m[31mE    +    where is_locked_out = <risk_manager.state.lockout_manager.LockoutManager object at 0x7424d1632510>.is_locked_out[0m
------------------------------ Captured log setup ------------------------------
[32mINFO    [0m root:conftest.py:37 Applying schema migration: v1 (initial schema)

[32mINFO    [0m root:conftest.py:37 Schema v1 applied successfully

[32mINFO    [0m root:conftest.py:37 Database initialized at /tmp/tmp1mdn4p6i.db

[32mINFO    [0m root:conftest.py:37 Loaded 0 lockouts from database

[32mINFO    [0m root:conftest.py:37 Lockout Manager initialized
------------------------------ Captured log call -------------------------------
[32mINFO    [0m root:conftest.py:37 Account 123 locked until 2025-10-27T19:06:10.920014+00:00: Daily loss limit exceeded

[32mINFO    [0m root:conftest.py:37 Lockout cleared for account 123: Daily loss limit exceeded
---------------------------- Captured log teardown -----------------------------
[32mINFO    [0m root:conftest.py:37 Database closed
[31m[1m____ TestHardLockoutOperations.test_is_locked_out_returns_true_when_locked _____[0m
[1m[31mtests/unit/test_state/test_lockout_manager.py[0m:99: in test_is_locked_out_returns_true_when_locked
    [0m[94massert[39;49;00m result [95mis[39;49;00m [94mTrue[39;49;00m[90m[39;49;00m
[1m[31mE   assert False is True[0m
------------------------------ Captured log setup ------------------------------
[32mINFO    [0m root:conftest.py:37 Applying schema migration: v1 (initial schema)

[32mINFO    [0m root:conftest.py:37 Schema v1 applied successfully

[32mINFO    [0m root:conftest.py:37 Database initialized at /tmp/tmp0lxupk83.db

[32mINFO    [0m root:conftest.py:37 Loaded 0 lockouts from database

[32mINFO    [0m root:conftest.py:37 Lockout Manager initialized
------------------------------ Captured log call -------------------------------
[32mINFO    [0m root:conftest.py:37 Account 123 locked until 2025-10-27T19:06:11.136378+00:00: Test reason

[32mINFO    [0m root:conftest.py:37 Lockout cleared for account 123: Test reason
---------------------------- Captured log teardown -----------------------------
[32mINFO    [0m root:conftest.py:37 Database closed
[31m[1m_______ TestHardLockoutOperations.test_get_lockout_info_returns_details ________[0m
[1m[31mtests/unit/test_state/test_lockout_manager.py[0m:132: in test_get_lockout_info_returns_details
    [0m[94massert[39;49;00m info [95mis[39;49;00m [95mnot[39;49;00m [94mNone[39;49;00m[90m[39;49;00m
[1m[31mE   assert None is not None[0m
------------------------------ Captured log setup ------------------------------
[32mINFO    [0m root:conftest.py:37 Applying schema migration: v1 (initial schema)

[32mINFO    [0m root:conftest.py:37 Schema v1 applied successfully

[32mINFO    [0m root:conftest.py:37 Database initialized at /tmp/tmpj694ujqg.db

[32mINFO    [0m root:conftest.py:37 Loaded 0 lockouts from database

[32mINFO    [0m root:conftest.py:37 Lockout Manager initialized
------------------------------ Captured log call -------------------------------
[32mINFO    [0m root:conftest.py:37 Account 123 locked until 2025-10-27T19:06:11.609765+00:00: Daily loss limit exceeded

[32mINFO    [0m root:conftest.py:37 Lockout cleared for account 123: Daily loss limit exceeded
---------------------------- Captured log teardown -----------------------------
[32mINFO    [0m root:conftest.py:37 Database closed
[31m[1m_________ TestHardLockoutOperations.test_clear_lockout_removes_lockout _________[0m
[1m[31mtests/unit/test_state/test_lockout_manager.py[0m:163: in test_clear_lockout_removes_lockout
    [0m[94massert[39;49;00m lockout_manager.is_locked_out(account_id) [95mis[39;49;00m [94mTrue[39;49;00m[90m[39;49;00m
[1m[31mE   assert False is True[0m
[1m[31mE    +  where False = is_locked_out(123)[0m
[1m[31mE    +    where is_locked_out = <risk_manager.state.lockout_manager.LockoutManager object at 0x7424d18a3bf0>.is_locked_out[0m
------------------------------ Captured log setup ------------------------------
[32mINFO    [0m root:conftest.py:37 Applying schema migration: v1 (initial schema)

[32mINFO    [0m root:conftest.py:37 Schema v1 applied successfully

[32mINFO    [0m root:conftest.py:37 Database initialized at /tmp/tmphlau_97w.db

[32mINFO    [0m root:conftest.py:37 Loaded 0 lockouts from database

[32mINFO    [0m root:conftest.py:37 Lockout Manager initialized
------------------------------ Captured log call -------------------------------
[32mINFO    [0m root:conftest.py:37 Account 123 locked until 2025-10-27T19:06:11.937220+00:00: Test reason

[32mINFO    [0m root:conftest.py:37 Lockout cleared for account 123: Test reason
---------------------------- Captured log teardown -----------------------------
[32mINFO    [0m root:conftest.py:37 Database closed
[31m[1m_________ TestCooldownTimers.test_cooldown_auto_expires_after_duration _________[0m
[1m[31mtests/unit/test_state/test_lockout_manager.py[0m:223: in test_cooldown_auto_expires_after_duration
    [0m[94massert[39;49;00m lockout_manager.is_locked_out(account_id) [95mis[39;49;00m [94mFalse[39;49;00m[90m[39;49;00m
[1m[31mE   assert True is False[0m
[1m[31mE    +  where True = is_locked_out(123)[0m
[1m[31mE    +    where is_locked_out = <risk_manager.state.lockout_manager.LockoutManager object at 0x7424d177cd10>.is_locked_out[0m
------------------------------ Captured log setup ------------------------------
[32mINFO    [0m root:conftest.py:37 Applying schema migration: v1 (initial schema)

[32mINFO    [0m root:conftest.py:37 Schema v1 applied successfully

[32mINFO    [0m root:conftest.py:37 Database initialized at /tmp/tmpz3k5pywe.db

[32mINFO    [0m root:conftest.py:37 Loaded 0 lockouts from database

[32mINFO    [0m root:conftest.py:37 Lockout Manager initialized
------------------------------ Captured log call -------------------------------
[32mINFO    [0m root:conftest.py:37 Timer Manager unavailable, using background task fallback: TestCooldownTimers.test_cooldown_auto_expires_after_duration.<locals>.mock_start_timer() got an unexpected keyword argument 'duration'

[32mINFO    [0m root:conftest.py:37 Account 123 cooldown for 1800s: Test
---------------------------- Captured log teardown -----------------------------
[32mINFO    [0m root:conftest.py:37 Database closed
[31m[1m____________ TestCooldownTimers.test_cooldown_cleared_cancels_timer ____________[0m
[1m[31mtests/unit/test_state/test_lockout_manager.py[0m:260: in test_cooldown_cleared_cancels_timer
    [0m[94mawait[39;49;00m lockout_manager.clear_lockout(account_id)[90m[39;49;00m
[1m[31mE   TypeError: object NoneType can't be used in 'await' expression[0m
------------------------------ Captured log setup ------------------------------
[32mINFO    [0m root:conftest.py:37 Applying schema migration: v1 (initial schema)

[32mINFO    [0m root:conftest.py:37 Schema v1 applied successfully

[32mINFO    [0m root:conftest.py:37 Database initialized at /tmp/tmpixr2ionj.db

[32mINFO    [0m root:conftest.py:37 Loaded 0 lockouts from database

[32mINFO    [0m root:conftest.py:37 Lockout Manager initialized
------------------------------ Captured log call -------------------------------
[32mINFO    [0m root:conftest.py:37 Timer started for account 123 cooldown

[32mINFO    [0m root:conftest.py:37 Account 123 cooldown for 1800s: Test

[32mINFO    [0m root:conftest.py:37 Lockout cleared for account 123: Test
---------------------------- Captured log teardown -----------------------------
[32mINFO    [0m root:conftest.py:37 Database closed
[31m[1m_____________ TestBackgroundTask.test_expired_lockout_auto_cleared _____________[0m
[1m[31mtests/unit/test_state/test_lockout_manager.py[0m:340: in test_expired_lockout_auto_cleared
    [0m[94massert[39;49;00m lockout_manager.is_locked_out(account_id) [95mis[39;49;00m [94mTrue[39;49;00m[90m[39;49;00m
[1m[31mE   assert False is True[0m
[1m[31mE    +  where False = is_locked_out(123)[0m
[1m[31mE    +    where is_locked_out = <risk_manager.state.lockout_manager.LockoutManager object at 0x7424d176e430>.is_locked_out[0m
------------------------------ Captured log setup ------------------------------
[32mINFO    [0m root:conftest.py:37 Applying schema migration: v1 (initial schema)

[32mINFO    [0m root:conftest.py:37 Schema v1 applied successfully

[32mINFO    [0m root:conftest.py:37 Database initialized at /tmp/tmpnwstdqir.db

[32mINFO    [0m root:conftest.py:37 Loaded 0 lockouts from database

[32mINFO    [0m root:conftest.py:37 Lockout Manager initialized
------------------------------ Captured log call -------------------------------
[32mINFO    [0m root:conftest.py:37 Account 123 locked until 2025-10-27T17:06:05.919915+00:00: Test

[32mINFO    [0m root:conftest.py:37 Lockout cleared for account 123: Test
---------------------------- Captured log teardown -----------------------------
[32mINFO    [0m root:conftest.py:37 Database closed
[31m[1m_______ TestMultipleAccounts.test_multiple_accounts_locked_independently _______[0m
[1m[31mtests/unit/test_state/test_lockout_manager.py[0m:398: in test_multiple_accounts_locked_independently
    [0m[94massert[39;49;00m lockout_manager.is_locked_out(account1) [95mis[39;49;00m [94mTrue[39;49;00m[90m[39;49;00m
[1m[31mE   assert False is True[0m
[1m[31mE    +  where False = is_locked_out(123)[0m
[1m[31mE    +    where is_locked_out = <risk_manager.state.lockout_manager.LockoutManager object at 0x7424d15fd7e0>.is_locked_out[0m
------------------------------ Captured log setup ------------------------------
[32mINFO    [0m root:conftest.py:37 Applying schema migration: v1 (initial schema)

[32mINFO    [0m root:conftest.py:37 Schema v1 applied successfully

[32mINFO    [0m root:conftest.py:37 Database initialized at /tmp/tmpyb6bokbp.db

[32mINFO    [0m root:conftest.py:37 Loaded 0 lockouts from database

[32mINFO    [0m root:conftest.py:37 Lockout Manager initialized
------------------------------ Captured log call -------------------------------
[32mINFO    [0m root:conftest.py:37 Account 123 locked until 2025-10-27T18:06:16.846359+00:00: Reason 1

[32mINFO    [0m root:conftest.py:37 Account 456 locked until 2025-10-27T19:06:16.846367+00:00: Reason 2

[32mINFO    [0m root:conftest.py:37 Account 789 locked until 2025-10-27T20:06:16.846369+00:00: Reason 3

[32mINFO    [0m root:conftest.py:37 Lockout cleared for account 123: Reason 1
---------------------------- Captured log teardown -----------------------------
[32mINFO    [0m root:conftest.py:37 Database closed
[31m[1m________ TestMultipleAccounts.test_lockout_affects_only_target_account _________[0m
[1m[31mtests/unit/test_state/test_lockout_manager.py[0m:426: in test_lockout_affects_only_target_account
    [0m[94massert[39;49;00m lockout_manager.is_locked_out(locked_account) [95mis[39;49;00m [94mTrue[39;49;00m[90m[39;49;00m
[1m[31mE   assert False is True[0m
[1m[31mE    +  where False = is_locked_out(123)[0m
[1m[31mE    +    where is_locked_out = <risk_manager.state.lockout_manager.LockoutManager object at 0x7424d17b2ed0>.is_locked_out[0m
------------------------------ Captured log setup ------------------------------
[32mINFO    [0m root:conftest.py:37 Applying schema migration: v1 (initial schema)

[32mINFO    [0m root:conftest.py:37 Schema v1 applied successfully

[32mINFO    [0m root:conftest.py:37 Database initialized at /tmp/tmphfc19vu3.db

[32mINFO    [0m root:conftest.py:37 Loaded 0 lockouts from database

[32mINFO    [0m root:conftest.py:37 Lockout Manager initialized
------------------------------ Captured log call -------------------------------
[32mINFO    [0m root:conftest.py:37 Account 123 locked until 2025-10-27T19:06:17.105436+00:00: Test reason

[32mINFO    [0m root:conftest.py:37 Lockout cleared for account 123: Test reason
---------------------------- Captured log teardown -----------------------------
[32mINFO    [0m root:conftest.py:37 Database closed
[31m[1m_____ TestMultipleAccounts.test_clear_lockout_affects_only_target_account ______[0m
[1m[31mtests/unit/test_state/test_lockout_manager.py[0m:449: in test_clear_lockout_affects_only_target_account
    [0m[94massert[39;49;00m lockout_manager.is_locked_out(account1) [95mis[39;49;00m [94mTrue[39;49;00m[90m[39;49;00m
[1m[31mE   assert False is True[0m
[1m[31mE    +  where False = is_locked_out(123)[0m
[1m[31mE    +    where is_locked_out = <risk_manager.state.lockout_manager.LockoutManager object at 0x7424d17b01d0>.is_locked_out[0m
------------------------------ Captured log setup ------------------------------
[32mINFO    [0m root:conftest.py:37 Applying schema migration: v1 (initial schema)

[32mINFO    [0m root:conftest.py:37 Schema v1 applied successfully

[32mINFO    [0m root:conftest.py:37 Database initialized at /tmp/tmphrsh2plc.db

[32mINFO    [0m root:conftest.py:37 Loaded 0 lockouts from database

[32mINFO    [0m root:conftest.py:37 Lockout Manager initialized
------------------------------ Captured log call -------------------------------
[32mINFO    [0m root:conftest.py:37 Account 123 locked until 2025-10-27T19:06:17.306172+00:00: Reason 1

[32mINFO    [0m root:conftest.py:37 Account 456 locked until 2025-10-27T19:06:17.306172+00:00: Reason 2

[32mINFO    [0m root:conftest.py:37 Account 789 locked until 2025-10-27T19:06:17.306172+00:00: Reason 3

[32mINFO    [0m root:conftest.py:37 Lockout cleared for account 456: Reason 2

[32mINFO    [0m root:conftest.py:37 Lockout cleared for account 123: Reason 1
---------------------------- Captured log teardown -----------------------------
[32mINFO    [0m root:conftest.py:37 Database closed
[31m[1m______ TestDatabasePersistence.test_load_lockouts_populates_memory_state _______[0m
[1m[31mtests/unit/test_state/test_lockout_manager.py[0m:540: in test_load_lockouts_populates_memory_state
    [0m[94massert[39;49;00m manager.is_locked_out(account_id) [95mis[39;49;00m [94mTrue[39;49;00m[90m[39;49;00m
[1m[31mE   assert False is True[0m
[1m[31mE    +  where False = is_locked_out(123)[0m
[1m[31mE    +    where is_locked_out = <risk_manager.state.lockout_manager.LockoutManager object at 0x7424d1490190>.is_locked_out[0m
------------------------------ Captured log setup ------------------------------
[32mINFO    [0m root:conftest.py:37 Applying schema migration: v1 (initial schema)

[32mINFO    [0m root:conftest.py:37 Schema v1 applied successfully

[32mINFO    [0m root:conftest.py:37 Database initialized at /tmp/tmpi5p939if.db
------------------------------ Captured log call -------------------------------
[32mINFO    [0m root:conftest.py:37 Loaded 0 lockouts from database

[32mINFO    [0m root:conftest.py:37 Lockout Manager initialized

[32mINFO    [0m root:conftest.py:37 Loaded 0 lockouts from database
---------------------------- Captured log teardown -----------------------------
[32mINFO    [0m root:conftest.py:37 Database closed
[31m[1m____________ TestEdgeCases.test_lockout_reason_persisted_correctly _____________[0m
[1m[31mtests/unit/test_state/test_lockout_manager.py[0m:629: in test_lockout_reason_persisted_correctly
    [0m[94massert[39;49;00m info[[33m"[39;49;00m[33mreason[39;49;00m[33m"[39;49;00m] == reason[90m[39;49;00m
           ^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   TypeError: 'NoneType' object is not subscriptable[0m
------------------------------ Captured log setup ------------------------------
[32mINFO    [0m root:conftest.py:37 Applying schema migration: v1 (initial schema)

[32mINFO    [0m root:conftest.py:37 Schema v1 applied successfully

[32mINFO    [0m root:conftest.py:37 Database initialized at /tmp/tmpc8kdd6xd.db

[32mINFO    [0m root:conftest.py:37 Loaded 0 lockouts from database

[32mINFO    [0m root:conftest.py:37 Lockout Manager initialized
------------------------------ Captured log call -------------------------------
[32mINFO    [0m root:conftest.py:37 Account 123 locked until 2025-10-27T19:06:18.521019+00:00: Daily loss limit exceeded
Max loss: $500
Current loss: $550

[32mINFO    [0m root:conftest.py:37 Lockout cleared for account 123: Daily loss limit exceeded
Max loss: $500
Current loss: $550
---------------------------- Captured log teardown -----------------------------
[32mINFO    [0m root:conftest.py:37 Database closed
[31m[1m____________ TestEdgeCases.test_double_lockout_overwrites_previous _____________[0m
[1m[31mtests/unit/test_state/test_lockout_manager.py[0m:648: in test_double_lockout_overwrites_previous
    [0m[94massert[39;49;00m info[[33m"[39;49;00m[33mreason[39;49;00m[33m"[39;49;00m] == [33m"[39;49;00m[33mReason 2[39;49;00m[33m"[39;49;00m[90m[39;49;00m
           ^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   TypeError: 'NoneType' object is not subscriptable[0m
------------------------------ Captured log setup ------------------------------
[32mINFO    [0m root:conftest.py:37 Applying schema migration: v1 (initial schema)

[32mINFO    [0m root:conftest.py:37 Schema v1 applied successfully

[32mINFO    [0m root:conftest.py:37 Database initialized at /tmp/tmp1i60sx64.db

[32mINFO    [0m root:conftest.py:37 Loaded 0 lockouts from database

[32mINFO    [0m root:conftest.py:37 Lockout Manager initialized
------------------------------ Captured log call -------------------------------
[32mINFO    [0m root:conftest.py:37 Account 123 locked until 2025-10-27T18:06:18.716246+00:00: Reason 1

[32mINFO    [0m root:conftest.py:37 Account 123 locked until 2025-10-27T20:06:18.716251+00:00: Reason 2

[32mINFO    [0m root:conftest.py:37 Lockout cleared for account 123: Reason 2
---------------------------- Captured log teardown -----------------------------
[32mINFO    [0m root:conftest.py:37 Database closed
[31m[1m____ TestEventRouterIntegration.test_locked_account_blocks_rule_processing _____[0m
[1m[31mtests/unit/test_state/test_lockout_manager.py[0m:675: in test_locked_account_blocks_rule_processing
    [0m[94massert[39;49;00m should_process_rules [95mis[39;49;00m [94mFalse[39;49;00m[90m[39;49;00m
[1m[31mE   assert True is False[0m
------------------------------ Captured log setup ------------------------------
[32mINFO    [0m root:conftest.py:37 Applying schema migration: v1 (initial schema)

[32mINFO    [0m root:conftest.py:37 Schema v1 applied successfully

[32mINFO    [0m root:conftest.py:37 Database initialized at /tmp/tmpc10ywzja.db

[32mINFO    [0m root:conftest.py:37 Loaded 0 lockouts from database

[32mINFO    [0m root:conftest.py:37 Lockout Manager initialized
------------------------------ Captured log call -------------------------------
[32mINFO    [0m root:conftest.py:37 Account 123 locked until 2025-10-27T19:06:18.936834+00:00: Test

[32mINFO    [0m root:conftest.py:37 Lockout cleared for account 123: Test
---------------------------- Captured log teardown -----------------------------
[32mINFO    [0m root:conftest.py:37 Database closed
[31m[1m___________ TestLockoutTypes.test_hard_lockout_type_stored_correctly ___________[0m
[1m[31mtests/unit/test_state/test_lockout_manager.py[0m:716: in test_hard_lockout_type_stored_correctly
    [0m[94massert[39;49;00m info[[33m"[39;49;00m[33mtype[39;49;00m[33m"[39;49;00m] == [33m"[39;49;00m[33mhard_lockout[39;49;00m[33m"[39;49;00m[90m[39;49;00m
           ^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   TypeError: 'NoneType' object is not subscriptable[0m
------------------------------ Captured log setup ------------------------------
[32mINFO    [0m root:conftest.py:37 Applying schema migration: v1 (initial schema)

[32mINFO    [0m root:conftest.py:37 Schema v1 applied successfully

[32mINFO    [0m root:conftest.py:37 Database initialized at /tmp/tmpe11xekjm.db

[32mINFO    [0m root:conftest.py:37 Loaded 0 lockouts from database

[32mINFO    [0m root:conftest.py:37 Lockout Manager initialized
------------------------------ Captured log call -------------------------------
[32mINFO    [0m root:conftest.py:37 Account 123 locked until 2025-10-27T19:06:19.398767+00:00: Test

[32mINFO    [0m root:conftest.py:37 Lockout cleared for account 123: Test
---------------------------- Captured log teardown -----------------------------
[32mINFO    [0m root:conftest.py:37 Database closed
[31m[1m____________ TestStartupShutdown.test_lockouts_restored_on_startup _____________[0m
[1m[31mtests/unit/test_state/test_lockout_manager.py[0m:769: in test_lockouts_restored_on_startup
    [0m[94massert[39;49;00m manager.is_locked_out(account_id) [95mis[39;49;00m [94mTrue[39;49;00m[90m[39;49;00m
[1m[31mE   assert False is True[0m
[1m[31mE    +  where False = is_locked_out(123)[0m
[1m[31mE    +    where is_locked_out = <risk_manager.state.lockout_manager.LockoutManager object at 0x7424d167cd50>.is_locked_out[0m
------------------------------ Captured log setup ------------------------------
[32mINFO    [0m root:conftest.py:37 Applying schema migration: v1 (initial schema)

[32mINFO    [0m root:conftest.py:37 Schema v1 applied successfully

[32mINFO    [0m root:conftest.py:37 Database initialized at /tmp/tmplmzgqlm9.db
------------------------------ Captured log call -------------------------------
[32mINFO    [0m root:conftest.py:37 Loaded 0 lockouts from database

[32mINFO    [0m root:conftest.py:37 Lockout Manager initialized
---------------------------- Captured log teardown -----------------------------
[32mINFO    [0m root:conftest.py:37 Database closed
[33m=============================== warnings summary ===============================[0m
.venv/lib/python3.13/site-packages/uvloop/__init__.py:154
  /mnt/c/Users/jakers/Desktop/risk-manager-v34/.venv/lib/python3.13/site-packages/uvloop/__init__.py:154: DeprecationWarning: uvloop.install() is deprecated in favor of uvloop.run() starting with Python 3.12.
    _warnings.warn(

tests/e2e/test_max_contracts_e2e.py:80
  /mnt/c/Users/jakers/Desktop/risk-manager-v34/tests/e2e/test_max_contracts_e2e.py:80: PytestUnknownMarkWarning: Unknown pytest.mark.e2e - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.e2e

tests/runtime/test_post_conditions.py::test_post_condition_event_bus_operational
  /mnt/c/Users/jakers/Desktop/risk-manager-v34/tests/runtime/test_post_conditions.py:117: RuntimeWarning: coroutine 'EventBus.publish' was never awaited
    bus.publish(RiskEvent(event_type=EventType.TRADE_EXECUTED, data={}))
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/runtime/test_smoke.py::test_smoke_event_bus_success
  /mnt/c/Users/jakers/Desktop/risk-manager-v34/tests/runtime/test_smoke.py:85: RuntimeWarning: coroutine 'EventBus.publish' was never awaited
    bus.publish(RiskEvent(event_type=EventType.POSITION_UPDATED, data={}))
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/unit/test_state/test_lockout_manager.py: 31 warnings
tests/unit/test_state/test_pnl_tracker.py: 12 warnings
  /mnt/c/Users/jakers/Desktop/risk-manager-v34/src/risk_manager/state/database.py:82: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    (1, datetime.utcnow().isoformat()),

tests/unit/test_state/test_pnl_tracker.py: 23 warnings
  /mnt/c/Users/jakers/Desktop/risk-manager-v34/src/risk_manager/state/pnl_tracker.py:63: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    now = datetime.utcnow().isoformat()

tests/unit/test_state/test_pnl_tracker.py::TestPnLTrackerReset::test_reset_clears_daily_pnl
tests/unit/test_state/test_pnl_tracker.py::TestPnLTrackerTradeCount::test_trade_count_resets_with_pnl
  /mnt/c/Users/jakers/Desktop/risk-manager-v34/src/risk_manager/state/pnl_tracker.py:194: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    now = datetime.utcnow().isoformat()

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
[36m[1m=========================== short test summary info ============================[0m
[31mFAILED[0m tests/runtime/test_dry_run.py::[1mtest_dry_run_pnl_calculation[0m - TypeError: Database.__init__() missing 1 required positional argument: 'db_...
[31mFAILED[0m tests/runtime/test_dry_run.py::[1mtest_dry_run_vs_real_comparison[0m - assert False is True
[31mFAILED[0m tests/runtime/test_post_conditions.py::[1mtest_post_condition_event_bus_operational[0m - assert False is True
[31mFAILED[0m tests/runtime/test_smoke.py::[1mtest_smoke_event_bus_success[0m - assert False is True
[31mFAILED[0m tests/runtime/test_smoke.py::[1mtest_smoke_state_tracking_success[0m - TypeError: Database.__init__() missing 1 required positional argument: 'db_...
[31mFAILED[0m tests/unit/test_state/test_lockout_manager.py::[1mTestHardLockoutOperations::test_set_lockout_locks_account[0m - assert False is True
[31mFAILED[0m tests/unit/test_state/test_lockout_manager.py::[1mTestHardLockoutOperations::test_is_locked_out_returns_true_when_locked[0m - assert False is True
[31mFAILED[0m tests/unit/test_state/test_lockout_manager.py::[1mTestHardLockoutOperations::test_get_lockout_info_returns_details[0m - assert None is not None
[31mFAILED[0m tests/unit/test_state/test_lockout_manager.py::[1mTestHardLockoutOperations::test_clear_lockout_removes_lockout[0m - assert False is True
[31mFAILED[0m tests/unit/test_state/test_lockout_manager.py::[1mTestCooldownTimers::test_cooldown_auto_expires_after_duration[0m - assert True is False
[31mFAILED[0m tests/unit/test_state/test_lockout_manager.py::[1mTestCooldownTimers::test_cooldown_cleared_cancels_timer[0m - TypeError: object NoneType can't be used in 'await' expression
[31mFAILED[0m tests/unit/test_state/test_lockout_manager.py::[1mTestBackgroundTask::test_expired_lockout_auto_cleared[0m - assert False is True
[31mFAILED[0m tests/unit/test_state/test_lockout_manager.py::[1mTestMultipleAccounts::test_multiple_accounts_locked_independently[0m - assert False is True
[31mFAILED[0m tests/unit/test_state/test_lockout_manager.py::[1mTestMultipleAccounts::test_lockout_affects_only_target_account[0m - assert False is True
[31mFAILED[0m tests/unit/test_state/test_lockout_manager.py::[1mTestMultipleAccounts::test_clear_lockout_affects_only_target_account[0m - assert False is True
[31mFAILED[0m tests/unit/test_state/test_lockout_manager.py::[1mTestDatabasePersistence::test_load_lockouts_populates_memory_state[0m - assert False is True
[31mFAILED[0m tests/unit/test_state/test_lockout_manager.py::[1mTestEdgeCases::test_lockout_reason_persisted_correctly[0m - TypeError: 'NoneType' object is not subscriptable
[31mFAILED[0m tests/unit/test_state/test_lockout_manager.py::[1mTestEdgeCases::test_double_lockout_overwrites_previous[0m - TypeError: 'NoneType' object is not subscriptable
[31mFAILED[0m tests/unit/test_state/test_lockout_manager.py::[1mTestEventRouterIntegration::test_locked_account_blocks_rule_processing[0m - assert True is False
[31mFAILED[0m tests/unit/test_state/test_lockout_manager.py::[1mTestLockoutTypes::test_hard_lockout_type_stored_correctly[0m - TypeError: 'NoneType' object is not subscriptable
[31mFAILED[0m tests/unit/test_state/test_lockout_manager.py::[1mTestStartupShutdown::test_lockouts_restored_on_startup[0m - assert False is True
[31mERROR[0m tests/unit/test_state/test_timer_manager.py::[1mtest_start_timer_creates_timer[0m - ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'
[31mERROR[0m tests/unit/test_state/test_timer_manager.py::[1mtest_get_remaining_time_decreases[0m - ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'
[31mERROR[0m tests/unit/test_state/test_timer_manager.py::[1mtest_cancel_timer_removes_timer[0m - ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'
[31mERROR[0m tests/unit/test_state/test_timer_manager.py::[1mtest_expired_timer_executes_callback[0m - ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'
[31mERROR[0m tests/unit/test_state/test_timer_manager.py::[1mtest_expired_timer_auto_removed[0m - ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'
[31mERROR[0m tests/unit/test_state/test_timer_manager.py::[1mtest_multiple_timers_run_simultaneously[0m - ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'
[31mERROR[0m tests/unit/test_state/test_timer_manager.py::[1mtest_timers_expire_independently[0m - ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'
[31mERROR[0m tests/unit/test_state/test_timer_manager.py::[1mtest_cancel_specific_timer_preserves_others[0m - ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'
[31mERROR[0m tests/unit/test_state/test_timer_manager.py::[1mtest_callback_receives_correct_context[0m - ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'
[31mERROR[0m tests/unit/test_state/test_timer_manager.py::[1mtest_callback_exception_doesnt_crash_manager[0m - ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'
[31mERROR[0m tests/unit/test_state/test_timer_manager.py::[1mtest_callback_executes_exactly_once[0m - ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'
[31mERROR[0m tests/unit/test_state/test_timer_manager.py::[1mtest_async_callback_supported[0m - ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'
[31mERROR[0m tests/unit/test_state/test_timer_manager.py::[1mtest_zero_duration_timer_executes_immediately[0m - ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'
[31mERROR[0m tests/unit/test_state/test_timer_manager.py::[1mtest_negative_duration_raises_error[0m - ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'
[31mERROR[0m tests/unit/test_state/test_timer_manager.py::[1mtest_timer_precision_within_tolerance[0m - ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'
[31mERROR[0m tests/unit/test_state/test_timer_manager.py::[1mtest_check_timers_runs_every_second[0m - ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'
[31mERROR[0m tests/unit/test_state/test_timer_manager.py::[1mtest_check_timers_stops_on_shutdown[0m - ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'
[31mERROR[0m tests/unit/test_state/test_timer_manager.py::[1mtest_get_remaining_time_nonexistent_timer_returns_zero[0m - ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'
[31mERROR[0m tests/unit/test_state/test_timer_manager.py::[1mtest_cancel_nonexistent_timer_no_error[0m - ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'
[31mERROR[0m tests/unit/test_state/test_timer_manager.py::[1mtest_duplicate_timer_name_overwrites_previous[0m - ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'
[31mERROR[0m tests/unit/test_state/test_timer_manager.py::[1mtest_has_timer_returns_false_for_nonexistent[0m - ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'
[31mERROR[0m tests/unit/test_state/test_timer_manager.py::[1mtest_start_timer_without_callback_raises_error[0m - ModuleNotFoundError: No module named 'risk_manager.state.timer_manager'
[31m=========== [31m[1m21 failed[0m, [32m146 passed[0m, [33m72 warnings[0m, [31m[1m22 errors[0m[31m in 29.24s[0m[31m ============[0m


================================================================================
End of Report
================================================================================
