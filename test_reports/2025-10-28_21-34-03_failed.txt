================================================================================
Risk Manager V34 - Test Report
================================================================================
Test Run: Tests matching: Pnl
Timestamp: 2025-10-28 21:34:03
Status: FAILED
Exit Code: 1
================================================================================

[1m============================= test session starts ==============================[0m
platform linux -- Python 3.13.7, pytest-8.4.2, pluggy-1.6.0 -- /mnt/c/Users/jakers/Desktop/risk-manager-v34/.venv/bin/python
cachedir: .pytest_cache
rootdir: /mnt/c/Users/jakers/Desktop/risk-manager-v34
configfile: pyproject.toml
plugins: anyio-4.11.0, asyncio-1.2.0, cov-7.0.0, mock-3.15.1
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
[1mcollecting ... [0mcollected 1396 items / 1341 deselected / 55 selected

tests/e2e/test_event_pipeline_e2e.py::TestEventPipelineE2E::test_pnl_update_event_flow [32mPASSED[0m[33m [  1%][0m
tests/integration/test_daily_realized_profit_integration.py::test_pnl_tracker_trade_count [32mPASSED[0m[33m [  3%][0m
tests/integration/test_daily_unrealized_loss_integration.py::TestDailyUnrealizedLossIntegration::test_real_pnl_calculation_accuracy [32mPASSED[0m[33m [  5%][0m
tests/integration/test_state_persistence.py::TestStatePersistence::test_pnl_persists_across_restart [32mPASSED[0m[33m [  7%][0m
tests/integration/test_state_persistence.py::TestStatePersistence::test_pnl_with_trade_count_persists [32mPASSED[0m[33m [  9%][0m
tests/runtime/test_dry_run.py::test_dry_run_pnl_calculation [32mPASSED[0m[33m       [ 10%][0m
tests/smoke/test_pnl_loss_rules_smoke.py::TestPnLLossRulesSmoke::test_rule_003_daily_realized_loss_fires [32mPASSED[0m[33m [ 12%][0m
tests/smoke/test_pnl_loss_rules_smoke.py::TestPnLLossRulesSmoke::test_rule_013_daily_realized_profit_fires [32mPASSED[0m[33m [ 14%][0m
tests/smoke/test_pnl_loss_rules_smoke.py::TestPnLLossRulesSmoke::test_rule_007_cooldown_after_loss_fires [32mPASSED[0m[33m [ 16%][0m
tests/smoke/test_pnl_loss_rules_smoke.py::TestPnLLossRulesSmoke::test_rule_008_stop_loss_enforcement_fires [32mPASSED[0m[33m [ 18%][0m
tests/smoke/test_pnl_loss_rules_smoke.py::TestPnLLossRulesSmoke::test_rule_008_stop_loss_placed_cancels_timer [32mPASSED[0m[33m [ 20%][0m
tests/smoke/test_pnl_loss_rules_smoke.py::test_smoke_summary [32mPASSED[0m[33m      [ 21%][0m
tests/unit/test_instrument_economics.py::TestInstrumentEconomics::test_pnl_es_long_profit [32mPASSED[0m[33m [ 23%][0m
tests/unit/test_instrument_economics.py::TestInstrumentEconomics::test_pnl_es_long_loss [32mPASSED[0m[33m [ 25%][0m
tests/unit/test_instrument_economics.py::TestInstrumentEconomics::test_pnl_mnq_long_loss [32mPASSED[0m[33m [ 27%][0m
tests/unit/test_instrument_economics.py::TestInstrumentEconomics::test_pnl_nq_short_profit [32mPASSED[0m[33m [ 29%][0m
tests/unit/test_instrument_economics.py::TestInstrumentEconomics::test_pnl_mes_short_loss [32mPASSED[0m[33m [ 30%][0m
tests/unit/test_rules/test_cooldown_after_loss.py::TestCooldownAfterLossRule::test_missing_pnl_field [32mPASSED[0m[33m [ 32%][0m
tests/unit/test_rules/test_daily_loss.py::TestDailyLossRuleUnit::test_ignores_non_pnl_events [32mPASSED[0m[33m [ 34%][0m
tests/unit/test_rules/test_daily_loss.py::TestDailyLossRuleUnit::test_evaluates_pnl_updated_event [32mPASSED[0m[33m [ 36%][0m
tests/unit/test_rules/test_daily_loss.py::TestDailyLossRuleUnit::test_pnl_within_limit_no_violation [32mPASSED[0m[33m [ 38%][0m
tests/unit/test_rules/test_daily_loss.py::TestDailyLossRuleUnit::test_zero_pnl_no_violation [32mPASSED[0m[33m [ 40%][0m
tests/unit/test_rules/test_daily_loss.py::TestDailyLossRuleUnit::test_positive_pnl_no_violation [32mPASSED[0m[33m [ 41%][0m
tests/unit/test_rules/test_daily_loss.py::TestDailyLossRuleUnit::test_pnl_exactly_at_limit_triggers_violation [32mPASSED[0m[33m [ 43%][0m
tests/unit/test_rules/test_daily_loss.py::TestDailyLossRuleUnit::test_pnl_one_cent_below_limit_no_violation [32mPASSED[0m[33m [ 45%][0m
tests/unit/test_rules/test_daily_loss.py::TestDailyLossRuleUnit::test_pnl_exceeds_limit_triggers_violation [32mPASSED[0m[33m [ 47%][0m
tests/unit/test_rules/test_daily_loss.py::TestDailyLossRuleUnit::test_pnl_one_cent_over_limit_triggers_violation [32mPASSED[0m[33m [ 49%][0m
tests/unit/test_rules/test_daily_loss.py::TestDailyLossRuleUnit::test_negative_limit_with_large_negative_pnl [32mPASSED[0m[33m [ 50%][0m
tests/unit/test_rules/test_daily_realized_loss.py::TestDailyRealizedLossRule::test_only_evaluates_pnl_events [32mPASSED[0m[33m [ 52%][0m
tests/unit/test_rules/test_daily_realized_loss.py::TestDailyRealizedLossRule::test_evaluates_pnl_updated_event [32mPASSED[0m[33m [ 54%][0m
tests/unit/test_rules/test_daily_realized_loss.py::TestDailyRealizedLossRule::test_zero_pnl [32mPASSED[0m[33m [ 56%][0m
tests/unit/test_rules/test_daily_realized_loss.py::TestDailyRealizedLossRule::test_missing_pnl_data [32mPASSED[0m[33m [ 58%][0m
tests/unit/test_rules/test_daily_realized_profit.py::TestDailyRealizedProfitRule::test_only_evaluates_pnl_events [32mPASSED[0m[33m [ 60%][0m
tests/unit/test_rules/test_daily_realized_profit.py::TestDailyRealizedProfitRule::test_evaluates_pnl_updated_event [31mFAILED[0m[31m [ 61%][0m
tests/unit/test_rules/test_daily_realized_profit.py::TestDailyRealizedProfitRule::test_zero_pnl [32mPASSED[0m[31m [ 63%][0m
tests/unit/test_rules/test_daily_realized_profit.py::TestDailyRealizedProfitRule::test_missing_pnl_data [32mPASSED[0m[31m [ 65%][0m
tests/unit/test_rules/test_daily_unrealized_loss.py::TestDailyUnrealizedLossRule::test_long_position_pnl_calculation [32mPASSED[0m[31m [ 67%][0m
tests/unit/test_rules/test_daily_unrealized_loss.py::TestDailyUnrealizedLossRule::test_es_position_pnl_calculation [32mPASSED[0m[31m [ 69%][0m
tests/unit/test_rules/test_daily_unrealized_loss.py::TestDailyUnrealizedLossRule::test_zero_size_position_returns_zero_pnl [32mPASSED[0m[31m [ 70%][0m
tests/unit/test_rules/test_max_unrealized_profit.py::TestMaxUnrealizedProfitRule::test_long_position_pnl_calculation [32mPASSED[0m[31m [ 72%][0m
tests/unit/test_rules/test_max_unrealized_profit.py::TestMaxUnrealizedProfitRule::test_mnq_position_pnl_calculation [32mPASSED[0m[31m [ 74%][0m
tests/unit/test_state/test_pnl_tracker.py::TestPnLTrackerBasics::test_tracker_initializes [32mPASSED[0m[31m [ 76%][0m
tests/unit/test_state/test_pnl_tracker.py::TestPnLTrackerBasics::test_get_daily_pnl_returns_zero_for_new_account [32mPASSED[0m[31m [ 78%][0m
tests/unit/test_state/test_pnl_tracker.py::TestPnLTrackerBasics::test_add_trade_pnl_updates_daily_total [32mPASSED[0m[31m [ 80%][0m
tests/unit/test_state/test_pnl_tracker.py::TestPnLTrackerPersistence::test_pnl_survives_restart [32mPASSED[0m[31m [ 81%][0m
tests/unit/test_state/test_pnl_tracker.py::TestPnLTrackerPersistence::test_multiple_accounts_tracked_independently [32mPASSED[0m[31m [ 83%][0m
tests/unit/test_state/test_pnl_tracker.py::TestPnLTrackerReset::test_reset_clears_daily_pnl [32mPASSED[0m[31m [ 85%][0m
tests/unit/test_state/test_pnl_tracker.py::TestPnLTrackerReset::test_different_dates_tracked_separately [32mPASSED[0m[31m [ 87%][0m
tests/unit/test_state/test_pnl_tracker.py::TestPnLTrackerTradeCount::test_trade_count_increments [32mPASSED[0m[31m [ 89%][0m
tests/unit/test_state/test_pnl_tracker.py::TestPnLTrackerTradeCount::test_trade_count_resets_with_pnl [32mPASSED[0m[31m [ 90%][0m
tests/unit/test_state/test_pnl_tracker.py::TestPnLTrackerEdgeCases::test_handles_zero_pnl_trades [32mPASSED[0m[31m [ 92%][0m
tests/unit/test_state/test_pnl_tracker.py::TestPnLTrackerEdgeCases::test_handles_large_pnl_values [32mPASSED[0m[31m [ 94%][0m
tests/unit/test_state/test_pnl_tracker.py::TestPnLTrackerEdgeCases::test_get_all_account_pnls [32mPASSED[0m[31m [ 96%][0m
tests/unit/test_state/test_reset_scheduler.py::TestDailyResetScheduling::test_daily_reset_clears_pnl_tracker [32mPASSED[0m[31m [ 98%][0m
tests/unit/test_state/test_reset_scheduler.py::TestWeeklyResetScheduling::test_weekly_reset_clears_weekly_pnl [32mPASSED[0m[31m [100%][0m

=================================== FAILURES ===================================
[31m[1m_________ TestDailyRealizedProfitRule.test_evaluates_pnl_updated_event _________[0m
[1m[31mC:\Users\jakers\Desktop\risk-manager-v34\tests\unit\test_rules\test_daily_realized_profit.py[0m:492: in test_evaluates_pnl_updated_event
    [0m[04m[91m?[39;49;00m[04m[91m?[39;49;00m[04m[91m?[39;49;00m[90m[39;49;00m
[1m[31mE   assert None is not None[0m
------------------------------ Captured log setup ------------------------------
[32mINFO    [0m root:C:\Users\jakers\Desktop\risk-manager-v34\tests\conftest.py:37 DailyRealizedProfitRule initialized: target=$1000.00, reset=17:00 America/New_York
------------------------------ Captured log call -------------------------------
[32mINFO    [0m root:C:\Users\jakers\Desktop\risk-manager-v34\tests\conftest.py:37 Ignoring half-turn trade (no realized P&L)
[33m=============================== warnings summary ===============================[0m
.venv/lib/python3.13/site-packages/uvloop/__init__.py:154
  /mnt/c/Users/jakers/Desktop/risk-manager-v34/.venv/lib/python3.13/site-packages/uvloop/__init__.py:154: DeprecationWarning: uvloop.install() is deprecated in favor of uvloop.run() starting with Python 3.12.
    _warnings.warn(

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
[36m[1m=========================== short test summary info ============================[0m
[31mFAILED[0m tests/unit/test_rules/test_daily_realized_profit.py::[1mTestDailyRealizedProfitRule::test_evaluates_pnl_updated_event[0m - assert None is not None
[31m========== [31m[1m1 failed[0m, [32m54 passed[0m, [33m1341 deselected[0m, [33m1 warning[0m[31m in 30.69s[0m[31m ===========[0m


================================================================================
End of Report
================================================================================
