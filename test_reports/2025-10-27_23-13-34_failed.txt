================================================================================
Risk Manager V34 - Test Report
================================================================================
Test Run: Last failed tests
Timestamp: 2025-10-27 23:13:34
Status: FAILED
Exit Code: 1
================================================================================

[1m============================= test session starts ==============================[0m
platform linux -- Python 3.13.7, pytest-8.4.2, pluggy-1.6.0 -- /mnt/c/Users/jakers/Desktop/risk-manager-v34/.venv/bin/python
cachedir: .pytest_cache
rootdir: /mnt/c/Users/jakers/Desktop/risk-manager-v34
configfile: pyproject.toml
plugins: anyio-4.11.0, asyncio-1.2.0, cov-7.0.0, mock-3.15.1
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
[1mcollecting ... [0mcollected 740 items / 628 deselected / 112 selected
run-last-failure: rerun previous 112 failures

tests/e2e/test_max_contracts_e2e.py::TestMaxContractsE2E::test_position_below_limit_no_enforcement [31mERROR[0m[31m [  0%][0m
tests/e2e/test_max_contracts_e2e.py::TestMaxContractsE2E::test_position_exceeds_limit_triggers_enforcement [31mERROR[0m[31m [  1%][0m
tests/e2e/test_max_contracts_e2e.py::TestMaxContractsE2E::test_complete_flow_sdk_to_enforcement [31mERROR[0m[31m [  2%][0m
tests/e2e/test_max_contracts_e2e.py::TestMaxContractsE2E::test_multiple_position_updates [31mERROR[0m[31m [  3%][0m
tests/e2e/test_max_contracts_e2e.py::TestMaxContractsE2E::test_multi_symbol_total_exceeds_limit [31mERROR[0m[31m [  4%][0m
tests/e2e/test_max_contracts_e2e.py::TestMaxContractsE2E::test_enforcement_closes_positions_via_sdk [31mERROR[0m[31m [  5%][0m
tests/e2e/test_max_contracts_e2e.py::TestMaxContractsE2E::test_system_continues_after_handler_error [31mERROR[0m[31m [  6%][0m
tests/e2e/test_max_contracts_e2e.py::TestMaxContractsE2E::test_end_to_end_latency [31mERROR[0m[31m [  7%][0m
tests/e2e/test_max_contracts_e2e.py::TestMaxContractsE2E::test_state_remains_consistent_across_events [31mERROR[0m[31m [  8%][0m
tests/e2e/test_max_contracts_e2e.py::TestMaxContractsE2E::test_realistic_day_trading_scenario [31mERROR[0m[31m [  8%][0m
tests/integration/test_daily_unrealized_loss_integration.py::TestDailyUnrealizedLossIntegration::test_full_unrealized_loss_violation_flow [31mERROR[0m[31m [  9%][0m
tests/integration/test_daily_unrealized_loss_integration.py::TestDailyUnrealizedLossIntegration::test_multi_position_independence [31mERROR[0m[31m [ 10%][0m
tests/integration/test_daily_unrealized_loss_integration.py::TestDailyUnrealizedLossIntegration::test_real_pnl_calculation_accuracy [31mERROR[0m[31m [ 11%][0m
tests/integration/test_daily_unrealized_loss_integration.py::TestDailyUnrealizedLossIntegration::test_market_price_updates_real_time_monitoring [31mERROR[0m[31m [ 12%][0m
tests/integration/test_daily_unrealized_loss_integration.py::TestDailyUnrealizedLossIntegration::test_different_tick_sizes_calculation [31mERROR[0m[31m [ 13%][0m
tests/integration/test_daily_unrealized_loss_integration.py::TestDailyUnrealizedLossIntegration::test_no_lockout_created_on_violation [31mERROR[0m[31m [ 14%][0m
tests/integration/test_daily_unrealized_loss_integration.py::TestDailyUnrealizedLossIntegration::test_event_bus_integration_complete_flow [31mERROR[0m[31m [ 15%][0m
tests/integration/test_daily_unrealized_loss_integration.py::TestDailyUnrealizedLossIntegration::test_position_closed_before_violation [31mERROR[0m[31m [ 16%][0m
tests/integration/test_daily_unrealized_loss_integration.py::TestDailyUnrealizedLossIntegration::test_long_and_short_positions_accuracy [31mERROR[0m[31m [ 16%][0m
tests/integration/test_daily_unrealized_loss_integration.py::TestDailyUnrealizedLossIntegration::test_enforcement_action_close_position_not_flatten_all [31mERROR[0m[31m [ 17%][0m
tests/integration/test_event_pipeline_integration.py::TestEventPipelineIntegration::test_engine_evaluates_rule_on_event [31mERROR[0m[31m [ 18%][0m
tests/integration/test_event_pipeline_integration.py::TestEventPipelineIntegration::test_engine_skips_rules_when_no_violation [31mERROR[0m[31m [ 19%][0m
tests/integration/test_event_pipeline_integration.py::TestEventPipelineIntegration::test_violation_triggers_flatten_enforcement [31mERROR[0m[31m [ 20%][0m
tests/integration/test_event_pipeline_integration.py::TestEventPipelineIntegration::test_violation_publishes_event [31mERROR[0m[31m [ 21%][0m
tests/integration/test_event_pipeline_integration.py::TestEventPipelineIntegration::test_end_to_end_position_violation_flow [31mERROR[0m[31m [ 22%][0m
tests/integration/test_event_pipeline_integration.py::TestEventPipelineIntegration::test_multiple_rules_evaluated_in_order [31mERROR[0m[31m [ 23%][0m
tests/integration/test_event_pipeline_integration.py::TestEventPipelineIntegration::test_engine_tracks_position_state [31mERROR[0m[31m [ 24%][0m
tests/integration/test_event_pipeline_integration.py::TestEventPipelineIntegration::test_flatten_action_calls_flatten_all [31mERROR[0m[31m [ 25%][0m
tests/integration/test_event_pipeline_integration.py::TestEventPipelineIntegration::test_pause_action_triggers_pause_trading [31mERROR[0m[31m [ 25%][0m
tests/integration/test_event_pipeline_integration.py::TestEventPipelineIntegration::test_event_processing_is_fast [31mERROR[0m[31m [ 26%][0m
tests/integration/test_event_pipeline_integration.py::TestEventPipelineIntegration::test_multi_symbol_position_tracking [31mERROR[0m[31m [ 27%][0m
tests/integration/test_max_position_integration.py::TestMaxPositionIntegration::test_single_symbol_within_limit [31mERROR[0m[31m [ 28%][0m
tests/integration/test_max_position_integration.py::TestMaxPositionIntegration::test_single_symbol_exceeds_limit [31mERROR[0m[31m [ 29%][0m
tests/integration/test_max_position_integration.py::TestMaxPositionIntegration::test_multi_symbol_total_within_limit [31mERROR[0m[31m [ 30%][0m
tests/integration/test_max_position_integration.py::TestMaxPositionIntegration::test_multi_symbol_total_exceeds_limit [31mERROR[0m[31m [ 31%][0m
tests/integration/test_max_position_integration.py::TestMaxPositionIntegration::test_short_positions_absolute_value [31mERROR[0m[31m [ 32%][0m
tests/integration/test_max_position_integration.py::TestMaxPositionIntegration::test_event_bus_integration [31mERROR[0m[31m [ 33%][0m
tests/integration/test_max_position_integration.py::TestMaxPositionIntegration::test_no_lockout_on_violation [31mERROR[0m[31m [ 33%][0m
tests/integration/test_max_position_integration.py::TestMaxPositionIntegration::test_zero_position_no_violation [31mERROR[0m[31m [ 34%][0m
tests/integration/test_max_position_integration.py::TestMaxPositionIntegration::test_exactly_at_limit_no_violation [31mERROR[0m[31m [ 35%][0m
tests/integration/test_max_position_integration.py::TestMaxPositionIntegration::test_performance_many_symbols [31mERROR[0m[31m [ 36%][0m
tests/integration/test_symbol_blocks_integration.py::TestSymbolBlocksRuleIntegration::test_order_rejection_flow_integration [32mPASSED[0m[31m [ 37%][0m
tests/integration/test_symbol_blocks_integration.py::TestSymbolBlocksRuleIntegration::test_allowed_symbol_passes_integration [32mPASSED[0m[31m [ 38%][0m
tests/integration/test_symbol_blocks_integration.py::TestSymbolBlocksRuleIntegration::test_position_close_flow_integration [32mPASSED[0m[31m [ 39%][0m
tests/integration/test_symbol_blocks_integration.py::TestSymbolBlocksRuleIntegration::test_position_opened_triggers_violation [32mPASSED[0m[31m [ 40%][0m
tests/integration/test_symbol_blocks_integration.py::TestSymbolBlocksRuleIntegration::test_wildcard_prefix_matching_integration [32mPASSED[0m[31m [ 41%][0m
tests/integration/test_symbol_blocks_integration.py::TestSymbolBlocksRuleIntegration::test_wildcard_contains_matching_integration [32mPASSED[0m[31m [ 41%][0m
tests/integration/test_symbol_blocks_integration.py::TestSymbolBlocksRuleIntegration::test_wildcard_does_not_match_allowed_symbols [32mPASSED[0m[31m [ 42%][0m
tests/integration/test_symbol_blocks_integration.py::TestSymbolBlocksRuleIntegration::test_case_insensitive_matching_integration [32mPASSED[0m[31m [ 43%][0m
tests/integration/test_symbol_blocks_integration.py::TestSymbolBlocksRuleIntegration::test_wildcard_case_insensitive_integration [32mPASSED[0m[31m [ 44%][0m
tests/integration/test_symbol_blocks_integration.py::TestSymbolBlocksRuleIntegration::test_multi_symbol_account_selective_close [32mPASSED[0m[31m [ 45%][0m
tests/integration/test_symbol_blocks_integration.py::TestSymbolBlocksRuleIntegration::test_multiple_blocked_symbols_in_account [32mPASSED[0m[31m [ 46%][0m
tests/integration/test_symbol_blocks_integration.py::TestSymbolBlocksRuleIntegration::test_event_bus_handles_violation_errors [32mPASSED[0m[31m [ 47%][0m
tests/integration/test_symbol_blocks_integration.py::TestSymbolBlocksRuleIntegration::test_no_lockout_trade_by_trade_enforcement [32mPASSED[0m[31m [ 48%][0m
tests/integration/test_symbol_blocks_integration.py::TestSymbolBlocksRuleIntegration::test_end_to_end_multiple_event_types [32mPASSED[0m[31m [ 49%][0m
tests/integration/test_symbol_blocks_integration.py::TestSymbolBlocksRuleIntegration::test_symbol_matching_performance [32mPASSED[0m[31m [ 50%][0m
tests/integration/test_symbol_blocks_integration.py::TestSymbolBlocksRuleIntegration::test_dynamic_blocked_list_update [32mPASSED[0m[31m [ 50%][0m
tests/integration/test_trade_management_integration.py::TestTradeManagementIntegration::test_auto_stop_loss_placement_es_long [31mERROR[0m[31m [ 51%][0m
tests/integration/test_trade_management_integration.py::TestTradeManagementIntegration::test_auto_stop_loss_placement_mnq_short [31mERROR[0m[31m [ 52%][0m
tests/integration/test_trade_management_integration.py::TestTradeManagementIntegration::test_auto_take_profit_placement [31mERROR[0m[31m [ 53%][0m
tests/integration/test_trade_management_integration.py::TestTradeManagementIntegration::test_bracket_order_creation [31mERROR[0m[31m [ 54%][0m
tests/integration/test_trade_management_integration.py::TestTradeManagementIntegration::test_trailing_stop_adjustment_on_profit [31mERROR[0m[31m [ 55%][0m
tests/integration/test_trade_management_integration.py::TestTradeManagementIntegration::test_trailing_stop_not_adjusted_on_loss [31mERROR[0m[31m [ 56%][0m
tests/integration/test_trade_management_integration.py::TestTradeManagementIntegration::test_multi_symbol_independent_management [31mERROR[0m[31m [ 57%][0m
tests/integration/test_trade_management_integration.py::TestTradeManagementIntegration::test_position_closed_orders_cleanup [31mERROR[0m[31m [ 58%][0m
tests/integration/test_trade_management_integration.py::TestTradeManagementIntegration::test_event_bus_routes_to_rule [31mERROR[0m[31m [ 58%][0m
tests/integration/test_trade_management_integration.py::TestTradeManagementIntegration::test_stop_loss_disabled_only_take_profit [31mFAILED[0m[31m [ 59%][0m
tests/integration/test_trade_management_integration.py::TestTradeManagementIntegration::test_take_profit_disabled_only_stop_loss [31mFAILED[0m[31m [ 60%][0m
tests/integration/test_trade_management_integration.py::TestTradeManagementIntegration::test_complete_order_placement_flow [31mERROR[0m[31m [ 61%][0m
tests/integration/test_trade_management_integration.py::TestTradeManagementIntegration::test_event_processing_performance [31mERROR[0m[31m [ 62%][0m
tests/unit/test_core/test_enforcement_wiring.py::TestEnforcementWiring::test_engine_accepts_trading_integration [32mPASSED[0m[31m [ 63%][0m
tests/unit/test_core/test_enforcement_wiring.py::TestEnforcementWiring::test_flatten_all_calls_trading_integration [32mPASSED[0m[31m [ 64%][0m
tests/unit/test_core/test_enforcement_wiring.py::TestEnforcementWiring::test_flatten_all_without_trading_integration [32mPASSED[0m[31m [ 65%][0m
tests/unit/test_core/test_enforcement_wiring.py::TestEnforcementWiring::test_enforcement_from_violation [32mPASSED[0m[31m [ 66%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_rule_initialization [31mERROR[0m[31m [ 66%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_position_below_limit_passes [31mERROR[0m[31m [ 67%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_zero_position_passes [31mERROR[0m[31m [ 68%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_position_at_limit_passes [31mERROR[0m[31m [ 69%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_position_exceeds_limit_violates [31mERROR[0m[31m [ 70%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_large_position_violates [31mERROR[0m[31m [ 71%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_multi_symbol_total_below_limit [31mERROR[0m[31m [ 72%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_multi_symbol_total_exceeds_limit [31mERROR[0m[31m [ 73%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_short_position_below_limit [31mERROR[0m[31m [ 74%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_short_position_exceeds_limit [31mERROR[0m[31m [ 75%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_flatten_action_in_violation [31mERROR[0m[31m [ 75%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_only_evaluates_position_events [31mERROR[0m[31m [ 76%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_evaluates_order_filled_event [31mERROR[0m[31m [ 77%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_missing_position_data [31mERROR[0m[31m [ 78%][0m
tests/unit/test_rules/test_max_position_rule.py::TestMaxPositionRuleUnit::test_violation_message_clarity [31mERROR[0m[31m [ 79%][0m
tests/unit/test_rules/test_symbol_blocks.py::TestSymbolBlocksRuleUnit::test_allowed_symbol_passes [32mPASSED[0m[31m [ 80%][0m
tests/unit/test_rules/test_symbol_blocks.py::TestSymbolBlocksRuleUnit::test_multiple_allowed_symbols_pass [32mPASSED[0m[31m [ 81%][0m
tests/unit/test_rules/test_symbol_blocks.py::TestSymbolBlocksRuleUnit::test_blocked_symbol_violates [32mPASSED[0m[31m [ 82%][0m
tests/unit/test_rules/test_symbol_blocks.py::TestSymbolBlocksRuleUnit::test_position_in_blocked_symbol_violates [32mPASSED[0m[31m [ 83%][0m
tests/unit/test_rules/test_symbol_blocks.py::TestSymbolBlocksRuleUnit::test_all_blocked_symbols_violate [32mPASSED[0m[31m [ 83%][0m
tests/unit/test_rules/test_symbol_blocks.py::TestSymbolBlocksRuleUnit::test_case_insensitive_uppercase [32mPASSED[0m[31m [ 84%][0m
tests/unit/test_rules/test_symbol_blocks.py::TestSymbolBlocksRuleUnit::test_case_insensitive_lowercase [32mPASSED[0m[31m [ 85%][0m
tests/unit/test_rules/test_symbol_blocks.py::TestSymbolBlocksRuleUnit::test_case_insensitive_mixed_case [32mPASSED[0m[31m [ 86%][0m
tests/unit/test_rules/test_symbol_blocks.py::TestSymbolBlocksRuleUnit::test_wildcard_prefix_match [32mPASSED[0m[31m [ 87%][0m
tests/unit/test_rules/test_symbol_blocks.py::TestSymbolBlocksRuleUnit::test_wildcard_contains_match [32mPASSED[0m[31m [ 88%][0m
tests/unit/test_rules/test_symbol_blocks.py::TestSymbolBlocksRuleUnit::test_wildcard_no_match [32mPASSED[0m[31m [ 89%][0m
tests/unit/test_rules/test_symbol_blocks.py::TestSymbolBlocksRuleUnit::test_wildcard_case_insensitive [32mPASSED[0m[31m [ 90%][0m
tests/unit/test_rules/test_symbol_blocks.py::TestSymbolBlocksRuleUnit::test_evaluates_order_placed_event [32mPASSED[0m[31m [ 91%][0m
tests/unit/test_rules/test_symbol_blocks.py::TestSymbolBlocksRuleUnit::test_evaluates_position_opened_event [32mPASSED[0m[31m [ 91%][0m
tests/unit/test_rules/test_symbol_blocks.py::TestSymbolBlocksRuleUnit::test_evaluates_position_updated_event [32mPASSED[0m[31m [ 92%][0m
tests/unit/test_rules/test_symbol_blocks.py::TestSymbolBlocksRuleUnit::test_ignores_irrelevant_events [32mPASSED[0m[31m [ 93%][0m
tests/unit/test_rules/test_symbol_blocks.py::TestSymbolBlocksRuleUnit::test_no_lockout_on_violation [32mPASSED[0m[31m [ 94%][0m
tests/unit/test_rules/test_symbol_blocks.py::TestSymbolBlocksRuleUnit::test_empty_blocked_list_allows_all [32mPASSED[0m[31m [ 95%][0m
tests/unit/test_rules/test_symbol_blocks.py::TestSymbolBlocksRuleUnit::test_missing_symbol_in_event [32mPASSED[0m[31m [ 96%][0m
tests/unit/test_rules/test_symbol_blocks.py::TestSymbolBlocksRuleUnit::test_none_symbol_in_event [32mPASSED[0m[31m [ 97%][0m
tests/unit/test_rules/test_symbol_blocks.py::TestSymbolBlocksRuleUnit::test_disabled_rule_allows_all [32mPASSED[0m[31m [ 98%][0m
tests/unit/test_rules/test_symbol_blocks.py::TestSymbolBlocksRuleUnit::test_violation_message_clarity [32mPASSED[0m[31m [ 99%][0m
tests/unit/test_rules/test_symbol_blocks.py::TestSymbolBlocksRuleUnit::test_violation_includes_rule_name [32mPASSED[0m[31m [100%][0m

==================================== ERRORS ====================================
[31m[1m_ ERROR at setup of TestMaxContractsE2E.test_position_below_limit_no_enforcement _[0m
[1m[31mtests/e2e/test_max_contracts_e2e.py[0m:93: in risk_manager
    [0mconfig = RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestMaxContractsE2E.test_position_exceeds_limit_triggers_enforcement _[0m
[1m[31mtests/e2e/test_max_contracts_e2e.py[0m:93: in risk_manager
    [0mconfig = RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestMaxContractsE2E.test_complete_flow_sdk_to_enforcement __[0m
[1m[31mtests/e2e/test_max_contracts_e2e.py[0m:93: in risk_manager
    [0mconfig = RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_____ ERROR at setup of TestMaxContractsE2E.test_multiple_position_updates _____[0m
[1m[31mtests/e2e/test_max_contracts_e2e.py[0m:93: in risk_manager
    [0mconfig = RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestMaxContractsE2E.test_multi_symbol_total_exceeds_limit __[0m
[1m[31mtests/e2e/test_max_contracts_e2e.py[0m:93: in risk_manager
    [0mconfig = RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestMaxContractsE2E.test_enforcement_closes_positions_via_sdk _[0m
[1m[31mtests/e2e/test_max_contracts_e2e.py[0m:93: in risk_manager
    [0mconfig = RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestMaxContractsE2E.test_system_continues_after_handler_error _[0m
[1m[31mtests/e2e/test_max_contracts_e2e.py[0m:93: in risk_manager
    [0mconfig = RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m________ ERROR at setup of TestMaxContractsE2E.test_end_to_end_latency _________[0m
[1m[31mtests/e2e/test_max_contracts_e2e.py[0m:93: in risk_manager
    [0mconfig = RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestMaxContractsE2E.test_state_remains_consistent_across_events _[0m
[1m[31mtests/e2e/test_max_contracts_e2e.py[0m:93: in risk_manager
    [0mconfig = RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m__ ERROR at setup of TestMaxContractsE2E.test_realistic_day_trading_scenario ___[0m
[1m[31mtests/e2e/test_max_contracts_e2e.py[0m:93: in risk_manager
    [0mconfig = RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestDailyUnrealizedLossIntegration.test_full_unrealized_loss_violation_flow _[0m
[1m[31mC:\Users\jakers\Desktop\risk-manager-v34\tests\integration\test_daily_unrealized_loss_integration.py[0m:88: in engine
    [0m[04m[91m?[39;49;00m[04m[91m?[39;49;00m[04m[91m?[39;49;00m[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestDailyUnrealizedLossIntegration.test_multi_position_independence _[0m
[1m[31mC:\Users\jakers\Desktop\risk-manager-v34\tests\integration\test_daily_unrealized_loss_integration.py[0m:88: in engine
    [0m[04m[91m?[39;49;00m[04m[91m?[39;49;00m[04m[91m?[39;49;00m[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestDailyUnrealizedLossIntegration.test_real_pnl_calculation_accuracy _[0m
[1m[31mC:\Users\jakers\Desktop\risk-manager-v34\tests\integration\test_daily_unrealized_loss_integration.py[0m:88: in engine
    [0m[04m[91m?[39;49;00m[04m[91m?[39;49;00m[04m[91m?[39;49;00m[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestDailyUnrealizedLossIntegration.test_market_price_updates_real_time_monitoring _[0m
[1m[31mC:\Users\jakers\Desktop\risk-manager-v34\tests\integration\test_daily_unrealized_loss_integration.py[0m:88: in engine
    [0m[04m[91m?[39;49;00m[04m[91m?[39;49;00m[04m[91m?[39;49;00m[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestDailyUnrealizedLossIntegration.test_different_tick_sizes_calculation _[0m
[1m[31mC:\Users\jakers\Desktop\risk-manager-v34\tests\integration\test_daily_unrealized_loss_integration.py[0m:88: in engine
    [0m[04m[91m?[39;49;00m[04m[91m?[39;49;00m[04m[91m?[39;49;00m[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestDailyUnrealizedLossIntegration.test_no_lockout_created_on_violation _[0m
[1m[31mC:\Users\jakers\Desktop\risk-manager-v34\tests\integration\test_daily_unrealized_loss_integration.py[0m:88: in engine
    [0m[04m[91m?[39;49;00m[04m[91m?[39;49;00m[04m[91m?[39;49;00m[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestDailyUnrealizedLossIntegration.test_event_bus_integration_complete_flow _[0m
[1m[31mC:\Users\jakers\Desktop\risk-manager-v34\tests\integration\test_daily_unrealized_loss_integration.py[0m:88: in engine
    [0m[04m[91m?[39;49;00m[04m[91m?[39;49;00m[04m[91m?[39;49;00m[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestDailyUnrealizedLossIntegration.test_position_closed_before_violation _[0m
[1m[31mC:\Users\jakers\Desktop\risk-manager-v34\tests\integration\test_daily_unrealized_loss_integration.py[0m:88: in engine
    [0m[04m[91m?[39;49;00m[04m[91m?[39;49;00m[04m[91m?[39;49;00m[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestDailyUnrealizedLossIntegration.test_long_and_short_positions_accuracy _[0m
[1m[31mC:\Users\jakers\Desktop\risk-manager-v34\tests\integration\test_daily_unrealized_loss_integration.py[0m:88: in engine
    [0m[04m[91m?[39;49;00m[04m[91m?[39;49;00m[04m[91m?[39;49;00m[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestDailyUnrealizedLossIntegration.test_enforcement_action_close_position_not_flatten_all _[0m
[1m[31mC:\Users\jakers\Desktop\risk-manager-v34\tests\integration\test_daily_unrealized_loss_integration.py[0m:88: in engine
    [0m[04m[91m?[39;49;00m[04m[91m?[39;49;00m[04m[91m?[39;49;00m[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestEventPipelineIntegration.test_engine_evaluates_rule_on_event _[0m
[1m[31mtests/integration/test_event_pipeline_integration.py[0m:27: in config
    [0m[94mreturn[39;49;00m RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestEventPipelineIntegration.test_engine_skips_rules_when_no_violation _[0m
[1m[31mtests/integration/test_event_pipeline_integration.py[0m:27: in config
    [0m[94mreturn[39;49;00m RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestEventPipelineIntegration.test_violation_triggers_flatten_enforcement _[0m
[1m[31mtests/integration/test_event_pipeline_integration.py[0m:27: in config
    [0m[94mreturn[39;49;00m RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestEventPipelineIntegration.test_violation_publishes_event _[0m
[1m[31mtests/integration/test_event_pipeline_integration.py[0m:27: in config
    [0m[94mreturn[39;49;00m RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestEventPipelineIntegration.test_end_to_end_position_violation_flow _[0m
[1m[31mtests/integration/test_event_pipeline_integration.py[0m:27: in config
    [0m[94mreturn[39;49;00m RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestEventPipelineIntegration.test_multiple_rules_evaluated_in_order _[0m
[1m[31mtests/integration/test_event_pipeline_integration.py[0m:27: in config
    [0m[94mreturn[39;49;00m RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestEventPipelineIntegration.test_engine_tracks_position_state _[0m
[1m[31mtests/integration/test_event_pipeline_integration.py[0m:27: in config
    [0m[94mreturn[39;49;00m RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestEventPipelineIntegration.test_flatten_action_calls_flatten_all _[0m
[1m[31mtests/integration/test_event_pipeline_integration.py[0m:27: in config
    [0m[94mreturn[39;49;00m RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestEventPipelineIntegration.test_pause_action_triggers_pause_trading _[0m
[1m[31mtests/integration/test_event_pipeline_integration.py[0m:27: in config
    [0m[94mreturn[39;49;00m RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestEventPipelineIntegration.test_event_processing_is_fast _[0m
[1m[31mtests/integration/test_event_pipeline_integration.py[0m:27: in config
    [0m[94mreturn[39;49;00m RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestEventPipelineIntegration.test_multi_symbol_position_tracking _[0m
[1m[31mtests/integration/test_event_pipeline_integration.py[0m:27: in config
    [0m[94mreturn[39;49;00m RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestMaxPositionIntegration.test_single_symbol_within_limit _[0m
[1m[31mtests/integration/test_max_position_integration.py[0m:36: in mock_engine
    [0mmock_engine.current_positions ={}[90m[39;49;00m
    ^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   NameError: name 'mock_engine' is not defined[0m
[31m[1m_ ERROR at setup of TestMaxPositionIntegration.test_single_symbol_exceeds_limit _[0m
[1m[31mtests/integration/test_max_position_integration.py[0m:36: in mock_engine
    [0mmock_engine.current_positions ={}[90m[39;49;00m
    ^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   NameError: name 'mock_engine' is not defined[0m
[31m[1m_ ERROR at setup of TestMaxPositionIntegration.test_multi_symbol_total_within_limit _[0m
[1m[31mtests/integration/test_max_position_integration.py[0m:36: in mock_engine
    [0mmock_engine.current_positions ={}[90m[39;49;00m
    ^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   NameError: name 'mock_engine' is not defined[0m
[31m[1m_ ERROR at setup of TestMaxPositionIntegration.test_multi_symbol_total_exceeds_limit _[0m
[1m[31mtests/integration/test_max_position_integration.py[0m:36: in mock_engine
    [0mmock_engine.current_positions ={}[90m[39;49;00m
    ^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   NameError: name 'mock_engine' is not defined[0m
[31m[1m_ ERROR at setup of TestMaxPositionIntegration.test_short_positions_absolute_value _[0m
[1m[31mtests/integration/test_max_position_integration.py[0m:36: in mock_engine
    [0mmock_engine.current_positions ={}[90m[39;49;00m
    ^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   NameError: name 'mock_engine' is not defined[0m
[31m[1m___ ERROR at setup of TestMaxPositionIntegration.test_event_bus_integration ____[0m
[1m[31mtests/integration/test_max_position_integration.py[0m:36: in mock_engine
    [0mmock_engine.current_positions ={}[90m[39;49;00m
    ^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   NameError: name 'mock_engine' is not defined[0m
[31m[1m__ ERROR at setup of TestMaxPositionIntegration.test_no_lockout_on_violation ___[0m
file /mnt/c/Users/jakers/Desktop/risk-manager-v34/tests/integration/test_max_position_integration.py, line 279
      @pytest.mark.asyncio
      @pytest.mark.integration
      async def test_no_lockout_on_violation(self, engine):
          """
          Test that violation does NOT create lockout.

          This is a trade-by-trade rule - close excess position only.
          Trader can continue trading within limits.
          """
          # Given: Position exceeds limit
          mock_engine.current_positions ={
              "ES": {"symbol": "ES", "size": 7, "avgPrice": 5000.0, "contractId": "CON.F.US.ES.H25"}
          }

          event = RiskEvent(
              event_type=EventType.POSITION_UPDATED,
              data={
                  "symbol": "ES",
                  "size": 7,
                  "avgPrice": 5000.0,
                  "contractId": "CON.F.US.ES.H25"
              }
          )

          # When: Rule evaluates
          violation = await rule.evaluate(event, mock_engine)

          # Then: Violation exists but action is close_position, not lockout
          assert violation is not None
          assert "lockout" not in violation or violation.get("lockout") is False
[31mE       fixture 'engine' not found[0m
[31m>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_bus, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, losing_trade, mock_engine, mock_suite, mock_suite_manager, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, risk_manager, rule, sample_order_event, sample_position, sample_position_event, sample_trade_event, session_mocker, setup_loguru_caplog, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, winning_trade[0m
[31m>       use 'pytest --fixtures [testpath]' for help on them.[0m

/mnt/c/Users/jakers/Desktop/risk-manager-v34/tests/integration/test_max_position_integration.py:279
[31m[1m_ ERROR at setup of TestMaxPositionIntegration.test_zero_position_no_violation _[0m
file /mnt/c/Users/jakers/Desktop/risk-manager-v34/tests/integration/test_max_position_integration.py, line 314
      @pytest.mark.asyncio
      @pytest.mark.integration
      async def test_zero_position_no_violation(self, engine):
          """Test that zero position does not trigger violation."""
          # Given: No positions
          mock_engine.current_positions ={}

          event = RiskEvent(
              event_type=EventType.POSITION_UPDATED,
              data={
                  "symbol": "ES",
                  "size": 0,
                  "avgPrice": 0.0,
                  "contractId": "CON.F.US.ES.H25"
              }
          )

          # When: Rule evaluates
          violation = await rule.evaluate(event, mock_engine)

          # Then: No violation
          assert violation is None
[31mE       fixture 'engine' not found[0m
[31m>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_bus, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, losing_trade, mock_engine, mock_suite, mock_suite_manager, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, risk_manager, rule, sample_order_event, sample_position, sample_position_event, sample_trade_event, session_mocker, setup_loguru_caplog, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, winning_trade[0m
[31m>       use 'pytest --fixtures [testpath]' for help on them.[0m

/mnt/c/Users/jakers/Desktop/risk-manager-v34/tests/integration/test_max_position_integration.py:314
[31m[1m_ ERROR at setup of TestMaxPositionIntegration.test_exactly_at_limit_no_violation _[0m
file /mnt/c/Users/jakers/Desktop/risk-manager-v34/tests/integration/test_max_position_integration.py, line 341
      @pytest.mark.asyncio
      @pytest.mark.integration
      async def test_exactly_at_limit_no_violation(self, engine):
          """
          Test position exactly at limit does not violate.

          Given: Max contracts = 5
          When: Total position = 5
          Then: No violation (>= comparison)
          """
          # Given: Position exactly at limit
          mock_engine.current_positions ={
              "ES": {"symbol": "ES", "size": 5, "avgPrice": 5000.0}
          }

          event = RiskEvent(
              event_type=EventType.POSITION_UPDATED,
              data={
                  "symbol": "ES",
                  "size": 5,
                  "avgPrice": 5000.0,
                  "contractId": "CON.F.US.ES.H25"
              }
          )

          # When: Rule evaluates
          violation = await rule.evaluate(event, mock_engine)

          # Then: No violation (rule uses > not >=)
          assert violation is None
[31mE       fixture 'engine' not found[0m
[31m>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_bus, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, losing_trade, mock_engine, mock_suite, mock_suite_manager, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, risk_manager, rule, sample_order_event, sample_position, sample_position_event, sample_trade_event, session_mocker, setup_loguru_caplog, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, winning_trade[0m
[31m>       use 'pytest --fixtures [testpath]' for help on them.[0m

/mnt/c/Users/jakers/Desktop/risk-manager-v34/tests/integration/test_max_position_integration.py:341
[31m[1m__ ERROR at setup of TestMaxPositionIntegration.test_performance_many_symbols __[0m
file /mnt/c/Users/jakers/Desktop/risk-manager-v34/tests/integration/test_max_position_integration.py, line 376
      @pytest.mark.asyncio
      @pytest.mark.integration
      async def test_performance_many_symbols(self, engine):
          """
          Test rule performs quickly with many symbols.

          Verifies rule can handle accounts with 10+ symbols.
          """
          import time

          # Given: Many symbols
          mock_engine.current_positions ={
              f"SYM{i}": {"symbol": f"SYM{i}", "size": 1, "avgPrice": 100.0}
              for i in range(20)
          }

          event = RiskEvent(
              event_type=EventType.POSITION_UPDATED,
              data={
                  "symbol": "SYM0",
                  "size": 1,
                  "avgPrice": 100.0,
                  "contractId": "CON.F.US.SYM0.H25"
              }
          )

          # When: Rule evaluates
          start = time.time()
          violation = await rule.evaluate(event, mock_engine)
          duration = time.time() - start

          # Then: Completes quickly (< 100ms)
          assert duration < 0.1

          # And: Violation detected (20 > 5)
          assert len(violations) == 1
[31mE       fixture 'engine' not found[0m
[31m>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_bus, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, losing_trade, mock_engine, mock_suite, mock_suite_manager, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, risk_manager, rule, sample_order_event, sample_position, sample_position_event, sample_trade_event, session_mocker, setup_loguru_caplog, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory, winning_trade[0m
[31m>       use 'pytest --fixtures [testpath]' for help on them.[0m

/mnt/c/Users/jakers/Desktop/risk-manager-v34/tests/integration/test_max_position_integration.py:376
[31m[1m_ ERROR at setup of TestTradeManagementIntegration.test_auto_stop_loss_placement_es_long _[0m
[1m[31mtests/integration/test_trade_management_integration.py[0m:105: in engine
    [0mconfig = RiskConfig(max_contracts=[94m10[39;49;00m)[90m[39;49;00m
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestTradeManagementIntegration.test_auto_stop_loss_placement_mnq_short _[0m
[1m[31mtests/integration/test_trade_management_integration.py[0m:105: in engine
    [0mconfig = RiskConfig(max_contracts=[94m10[39;49;00m)[90m[39;49;00m
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestTradeManagementIntegration.test_auto_take_profit_placement _[0m
[1m[31mtests/integration/test_trade_management_integration.py[0m:105: in engine
    [0mconfig = RiskConfig(max_contracts=[94m10[39;49;00m)[90m[39;49;00m
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestTradeManagementIntegration.test_bracket_order_creation _[0m
[1m[31mtests/integration/test_trade_management_integration.py[0m:105: in engine
    [0mconfig = RiskConfig(max_contracts=[94m10[39;49;00m)[90m[39;49;00m
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestTradeManagementIntegration.test_trailing_stop_adjustment_on_profit _[0m
[1m[31mtests/integration/test_trade_management_integration.py[0m:105: in engine
    [0mconfig = RiskConfig(max_contracts=[94m10[39;49;00m)[90m[39;49;00m
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestTradeManagementIntegration.test_trailing_stop_not_adjusted_on_loss _[0m
[1m[31mtests/integration/test_trade_management_integration.py[0m:105: in engine
    [0mconfig = RiskConfig(max_contracts=[94m10[39;49;00m)[90m[39;49;00m
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestTradeManagementIntegration.test_multi_symbol_independent_management _[0m
[1m[31mtests/integration/test_trade_management_integration.py[0m:105: in engine
    [0mconfig = RiskConfig(max_contracts=[94m10[39;49;00m)[90m[39;49;00m
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestTradeManagementIntegration.test_position_closed_orders_cleanup _[0m
[1m[31mtests/integration/test_trade_management_integration.py[0m:105: in engine
    [0mconfig = RiskConfig(max_contracts=[94m10[39;49;00m)[90m[39;49;00m
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestTradeManagementIntegration.test_event_bus_routes_to_rule _[0m
[1m[31mtests/integration/test_trade_management_integration.py[0m:105: in engine
    [0mconfig = RiskConfig(max_contracts=[94m10[39;49;00m)[90m[39;49;00m
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestTradeManagementIntegration.test_complete_order_placement_flow _[0m
[1m[31mtests/integration/test_trade_management_integration.py[0m:105: in engine
    [0mconfig = RiskConfig(max_contracts=[94m10[39;49;00m)[90m[39;49;00m
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestTradeManagementIntegration.test_event_processing_performance _[0m
[1m[31mtests/integration/test_trade_management_integration.py[0m:105: in engine
    [0mconfig = RiskConfig(max_contracts=[94m10[39;49;00m)[90m[39;49;00m
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m______ ERROR at setup of TestMaxPositionRuleUnit.test_rule_initialization ______[0m
[1m[31mtests/unit/test_rules/test_max_position_rule.py[0m:30: in config
    [0m[94mreturn[39;49;00m RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m__ ERROR at setup of TestMaxPositionRuleUnit.test_position_below_limit_passes __[0m
[1m[31mtests/unit/test_rules/test_max_position_rule.py[0m:30: in config
    [0m[94mreturn[39;49;00m RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_____ ERROR at setup of TestMaxPositionRuleUnit.test_zero_position_passes ______[0m
[1m[31mtests/unit/test_rules/test_max_position_rule.py[0m:30: in config
    [0m[94mreturn[39;49;00m RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m___ ERROR at setup of TestMaxPositionRuleUnit.test_position_at_limit_passes ____[0m
[1m[31mtests/unit/test_rules/test_max_position_rule.py[0m:30: in config
    [0m[94mreturn[39;49;00m RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestMaxPositionRuleUnit.test_position_exceeds_limit_violates _[0m
[1m[31mtests/unit/test_rules/test_max_position_rule.py[0m:30: in config
    [0m[94mreturn[39;49;00m RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m____ ERROR at setup of TestMaxPositionRuleUnit.test_large_position_violates ____[0m
[1m[31mtests/unit/test_rules/test_max_position_rule.py[0m:30: in config
    [0m[94mreturn[39;49;00m RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestMaxPositionRuleUnit.test_multi_symbol_total_below_limit _[0m
[1m[31mtests/unit/test_rules/test_max_position_rule.py[0m:30: in config
    [0m[94mreturn[39;49;00m RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestMaxPositionRuleUnit.test_multi_symbol_total_exceeds_limit _[0m
[1m[31mtests/unit/test_rules/test_max_position_rule.py[0m:30: in config
    [0m[94mreturn[39;49;00m RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m__ ERROR at setup of TestMaxPositionRuleUnit.test_short_position_below_limit ___[0m
[1m[31mtests/unit/test_rules/test_max_position_rule.py[0m:30: in config
    [0m[94mreturn[39;49;00m RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestMaxPositionRuleUnit.test_short_position_exceeds_limit __[0m
[1m[31mtests/unit/test_rules/test_max_position_rule.py[0m:30: in config
    [0m[94mreturn[39;49;00m RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m__ ERROR at setup of TestMaxPositionRuleUnit.test_flatten_action_in_violation __[0m
[1m[31mtests/unit/test_rules/test_max_position_rule.py[0m:30: in config
    [0m[94mreturn[39;49;00m RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestMaxPositionRuleUnit.test_only_evaluates_position_events _[0m
[1m[31mtests/unit/test_rules/test_max_position_rule.py[0m:30: in config
    [0m[94mreturn[39;49;00m RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_ ERROR at setup of TestMaxPositionRuleUnit.test_evaluates_order_filled_event __[0m
[1m[31mtests/unit/test_rules/test_max_position_rule.py[0m:30: in config
    [0m[94mreturn[39;49;00m RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m_____ ERROR at setup of TestMaxPositionRuleUnit.test_missing_position_data _____[0m
[1m[31mtests/unit/test_rules/test_max_position_rule.py[0m:30: in config
    [0m[94mreturn[39;49;00m RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m___ ERROR at setup of TestMaxPositionRuleUnit.test_violation_message_clarity ___[0m
[1m[31mtests/unit/test_rules/test_max_position_rule.py[0m:30: in config
    [0m[94mreturn[39;49;00m RiskConfig(max_contracts=[94m2[39;49;00m)[90m[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 2}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
=================================== FAILURES ===================================
[31m[1m___ TestTradeManagementIntegration.test_stop_loss_disabled_only_take_profit ____[0m
[1m[31mtests/integration/test_trade_management_integration.py[0m:681: in test_stop_loss_disabled_only_take_profit
    [0mrisk_config = RiskConfig(max_contracts=[94m10[39;49;00m)[90m[39;49;00m
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[31m[1m___ TestTradeManagementIntegration.test_take_profit_disabled_only_stop_loss ____[0m
[1m[31mtests/integration/test_trade_management_integration.py[0m:756: in test_take_profit_disabled_only_stop_loss
    [0mrisk_config = RiskConfig(max_contracts=[94m10[39;49;00m)[90m[39;49;00m
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m.venv/lib/python3.13/site-packages/pydantic_settings/main.py[0m:193: in __init__
    [0m[96msuper[39;49;00m().[92m__init__[39;49;00m([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskConfig[0m
[1m[31mE   project_x_api_key[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[1m[31mE   project_x_username[0m
[1m[31mE     Field required [type=missing, input_value={'max_contracts': 10}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.12/v/missing[0m
[33m=============================== warnings summary ===============================[0m
.venv/lib/python3.13/site-packages/uvloop/__init__.py:154
  /mnt/c/Users/jakers/Desktop/risk-manager-v34/.venv/lib/python3.13/site-packages/uvloop/__init__.py:154: DeprecationWarning: uvloop.install() is deprecated in favor of uvloop.run() starting with Python 3.12.
    _warnings.warn(

tests/e2e/test_max_contracts_e2e.py:80
  /mnt/c/Users/jakers/Desktop/risk-manager-v34/tests/e2e/test_max_contracts_e2e.py:80: PytestUnknownMarkWarning: Unknown pytest.mark.e2e - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.e2e

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
[36m[1m=========================== short test summary info ============================[0m
[31mFAILED[0m tests/integration/test_trade_management_integration.py::[1mTestTradeManagementIntegration::test_stop_loss_disabled_only_take_profit[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mFAILED[0m tests/integration/test_trade_management_integration.py::[1mTestTradeManagementIntegration::test_take_profit_disabled_only_stop_loss[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/e2e/test_max_contracts_e2e.py::[1mTestMaxContractsE2E::test_position_below_limit_no_enforcement[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/e2e/test_max_contracts_e2e.py::[1mTestMaxContractsE2E::test_position_exceeds_limit_triggers_enforcement[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/e2e/test_max_contracts_e2e.py::[1mTestMaxContractsE2E::test_complete_flow_sdk_to_enforcement[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/e2e/test_max_contracts_e2e.py::[1mTestMaxContractsE2E::test_multiple_position_updates[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/e2e/test_max_contracts_e2e.py::[1mTestMaxContractsE2E::test_multi_symbol_total_exceeds_limit[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/e2e/test_max_contracts_e2e.py::[1mTestMaxContractsE2E::test_enforcement_closes_positions_via_sdk[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/e2e/test_max_contracts_e2e.py::[1mTestMaxContractsE2E::test_system_continues_after_handler_error[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/e2e/test_max_contracts_e2e.py::[1mTestMaxContractsE2E::test_end_to_end_latency[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/e2e/test_max_contracts_e2e.py::[1mTestMaxContractsE2E::test_state_remains_consistent_across_events[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/e2e/test_max_contracts_e2e.py::[1mTestMaxContractsE2E::test_realistic_day_trading_scenario[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/integration/test_daily_unrealized_loss_integration.py::[1mTestDailyUnrealizedLossIntegration::test_full_unrealized_loss_violation_flow[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/integration/test_daily_unrealized_loss_integration.py::[1mTestDailyUnrealizedLossIntegration::test_multi_position_independence[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/integration/test_daily_unrealized_loss_integration.py::[1mTestDailyUnrealizedLossIntegration::test_real_pnl_calculation_accuracy[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/integration/test_daily_unrealized_loss_integration.py::[1mTestDailyUnrealizedLossIntegration::test_market_price_updates_real_time_monitoring[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/integration/test_daily_unrealized_loss_integration.py::[1mTestDailyUnrealizedLossIntegration::test_different_tick_sizes_calculation[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/integration/test_daily_unrealized_loss_integration.py::[1mTestDailyUnrealizedLossIntegration::test_no_lockout_created_on_violation[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/integration/test_daily_unrealized_loss_integration.py::[1mTestDailyUnrealizedLossIntegration::test_event_bus_integration_complete_flow[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/integration/test_daily_unrealized_loss_integration.py::[1mTestDailyUnrealizedLossIntegration::test_position_closed_before_violation[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/integration/test_daily_unrealized_loss_integration.py::[1mTestDailyUnrealizedLossIntegration::test_long_and_short_positions_accuracy[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/integration/test_daily_unrealized_loss_integration.py::[1mTestDailyUnrealizedLossIntegration::test_enforcement_action_close_position_not_flatten_all[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/integration/test_event_pipeline_integration.py::[1mTestEventPipelineIntegration::test_engine_evaluates_rule_on_event[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/integration/test_event_pipeline_integration.py::[1mTestEventPipelineIntegration::test_engine_skips_rules_when_no_violation[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/integration/test_event_pipeline_integration.py::[1mTestEventPipelineIntegration::test_violation_triggers_flatten_enforcement[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/integration/test_event_pipeline_integration.py::[1mTestEventPipelineIntegration::test_violation_publishes_event[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/integration/test_event_pipeline_integration.py::[1mTestEventPipelineIntegration::test_end_to_end_position_violation_flow[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/integration/test_event_pipeline_integration.py::[1mTestEventPipelineIntegration::test_multiple_rules_evaluated_in_order[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/integration/test_event_pipeline_integration.py::[1mTestEventPipelineIntegration::test_engine_tracks_position_state[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/integration/test_event_pipeline_integration.py::[1mTestEventPipelineIntegration::test_flatten_action_calls_flatten_all[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/integration/test_event_pipeline_integration.py::[1mTestEventPipelineIntegration::test_pause_action_triggers_pause_trading[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/integration/test_event_pipeline_integration.py::[1mTestEventPipelineIntegration::test_event_processing_is_fast[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/integration/test_event_pipeline_integration.py::[1mTestEventPipelineIntegration::test_multi_symbol_position_tracking[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/integration/test_max_position_integration.py::[1mTestMaxPositionIntegration::test_single_symbol_within_limit[0m - NameError: name 'mock_engine' is not defined
[31mERROR[0m tests/integration/test_max_position_integration.py::[1mTestMaxPositionIntegration::test_single_symbol_exceeds_limit[0m - NameError: name 'mock_engine' is not defined
[31mERROR[0m tests/integration/test_max_position_integration.py::[1mTestMaxPositionIntegration::test_multi_symbol_total_within_limit[0m - NameError: name 'mock_engine' is not defined
[31mERROR[0m tests/integration/test_max_position_integration.py::[1mTestMaxPositionIntegration::test_multi_symbol_total_exceeds_limit[0m - NameError: name 'mock_engine' is not defined
[31mERROR[0m tests/integration/test_max_position_integration.py::[1mTestMaxPositionIntegration::test_short_positions_absolute_value[0m - NameError: name 'mock_engine' is not defined
[31mERROR[0m tests/integration/test_max_position_integration.py::[1mTestMaxPositionIntegration::test_event_bus_integration[0m - NameError: name 'mock_engine' is not defined
[31mERROR[0m tests/integration/test_max_position_integration.py::[1mTestMaxPositionIntegration::test_no_lockout_on_violation[0m
[31mERROR[0m tests/integration/test_max_position_integration.py::[1mTestMaxPositionIntegration::test_zero_position_no_violation[0m
[31mERROR[0m tests/integration/test_max_position_integration.py::[1mTestMaxPositionIntegration::test_exactly_at_limit_no_violation[0m
[31mERROR[0m tests/integration/test_max_position_integration.py::[1mTestMaxPositionIntegration::test_performance_many_symbols[0m
[31mERROR[0m tests/integration/test_trade_management_integration.py::[1mTestTradeManagementIntegration::test_auto_stop_loss_placement_es_long[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/integration/test_trade_management_integration.py::[1mTestTradeManagementIntegration::test_auto_stop_loss_placement_mnq_short[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/integration/test_trade_management_integration.py::[1mTestTradeManagementIntegration::test_auto_take_profit_placement[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/integration/test_trade_management_integration.py::[1mTestTradeManagementIntegration::test_bracket_order_creation[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/integration/test_trade_management_integration.py::[1mTestTradeManagementIntegration::test_trailing_stop_adjustment_on_profit[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/integration/test_trade_management_integration.py::[1mTestTradeManagementIntegration::test_trailing_stop_not_adjusted_on_loss[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/integration/test_trade_management_integration.py::[1mTestTradeManagementIntegration::test_multi_symbol_independent_management[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/integration/test_trade_management_integration.py::[1mTestTradeManagementIntegration::test_position_closed_orders_cleanup[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/integration/test_trade_management_integration.py::[1mTestTradeManagementIntegration::test_event_bus_routes_to_rule[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/integration/test_trade_management_integration.py::[1mTestTradeManagementIntegration::test_complete_order_placement_flow[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/integration/test_trade_management_integration.py::[1mTestTradeManagementIntegration::test_event_processing_performance[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/unit/test_rules/test_max_position_rule.py::[1mTestMaxPositionRuleUnit::test_rule_initialization[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/unit/test_rules/test_max_position_rule.py::[1mTestMaxPositionRuleUnit::test_position_below_limit_passes[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/unit/test_rules/test_max_position_rule.py::[1mTestMaxPositionRuleUnit::test_zero_position_passes[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/unit/test_rules/test_max_position_rule.py::[1mTestMaxPositionRuleUnit::test_position_at_limit_passes[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/unit/test_rules/test_max_position_rule.py::[1mTestMaxPositionRuleUnit::test_position_exceeds_limit_violates[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/unit/test_rules/test_max_position_rule.py::[1mTestMaxPositionRuleUnit::test_large_position_violates[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/unit/test_rules/test_max_position_rule.py::[1mTestMaxPositionRuleUnit::test_multi_symbol_total_below_limit[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/unit/test_rules/test_max_position_rule.py::[1mTestMaxPositionRuleUnit::test_multi_symbol_total_exceeds_limit[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/unit/test_rules/test_max_position_rule.py::[1mTestMaxPositionRuleUnit::test_short_position_below_limit[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/unit/test_rules/test_max_position_rule.py::[1mTestMaxPositionRuleUnit::test_short_position_exceeds_limit[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/unit/test_rules/test_max_position_rule.py::[1mTestMaxPositionRuleUnit::test_flatten_action_in_violation[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/unit/test_rules/test_max_position_rule.py::[1mTestMaxPositionRuleUnit::test_only_evaluates_position_events[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/unit/test_rules/test_max_position_rule.py::[1mTestMaxPositionRuleUnit::test_evaluates_order_filled_event[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/unit/test_rules/test_max_position_rule.py::[1mTestMaxPositionRuleUnit::test_missing_position_data[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31mERROR[0m tests/unit/test_rules/test_max_position_rule.py::[1mTestMaxPositionRuleUnit::test_violation_message_clarity[0m - pydantic_core._pydantic_core.ValidationError: 2 validation errors for RiskC...
[31m===== [31m[1m2 failed[0m, [32m43 passed[0m, [33m628 deselected[0m, [33m2 warnings[0m, [31m[1m67 errors[0m[31m in 19.00s[0m[31m =====[0m


================================================================================
End of Report
================================================================================
